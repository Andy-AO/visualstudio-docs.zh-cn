---
title: XSLT 性能
ms.date: 03/05/2019
ms.topic: conceptual
ms.assetid: 87387c9a-2e89-4801-ad51-83740cd6ea25
author: jillre
ms.author: jillfra
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 2866e9b19ea2b79bf8435d81c93443bb20ff4fec
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/19/2019
ms.locfileid: "72645911"
---
# <a name="the-xslt-profiler"></a>XSLT 探查器

XSLT 探查器可创建详细的 XSLT 性能报告，有助于度量、评估和锁定 XSLT 代码中与性能相关的问题。 XSLT 探查器包含有关 XSL 和 XSLT 样式表优化的有用提示。 对于需要最佳性能的 XSLT 应用程序，此工具必不可少。

XSLT 探查器是 Visual Studio 的一部分，可用于**XML**菜单。

![XSLT 探查器](../xml-tools/media/profile-xslt-menu.png)

> [!NOTE]
> XSLT 探查器仅在 Visual Studio 企业版中可用。

## <a name="create-a-performance-report"></a>创建性能报告

1. 在 Visual Studio 中打开 XSLT 文档。

2. 在菜单栏上，选择 " **XML**  > **Profile XSLT**"。

3. 提供一个输入 XML 文档。 如果尚未打开 XML 文档，系统会提示您提供该文件。

   分析开始，进度栏会显示编辑器中的进度。 还显示 XSLT 输出。

4. 性能会话结束后，检查性能报表以分析 XSLT 性能。

## <a name="get-all-available-views"></a>获取所有可用视图

1. 单击 "**当前视图**" 下拉列表以获取所有可用的视图。

2. 选择 "**当前视图**" 下拉列表中的 "**摘要视图**" 选项。 默认情况下，性能报告显示在 "**摘要" 视图**中。 此视图是确定 XSLT 文档性能问题的起始点。 "**摘要" 视图**列出以下数据点：

   - 最频繁调用的函数

   - 执行单独工作最多的函数

   - 执行时间最长的函数

   默认情况下，每个数据点有以下三列：函数的名称、调用次数的绝对值和命名函数调用相对总函数调用的百分比值。 从 "**摘要" 视图**中的每个数据点，通过右键单击函数数据点，可以导航到更详细的视图。

3. 选择 "**当前视图**" 下拉列表中的 "**函数视图**" 选项。 **函数视图**列出分析过程中调用的函数。 可以通过单击列名对数据进行排序。 默认情况下，显示的列有：

    - **函数名**

    - **已用非独占时间**

    - **已用独占时间**

    - **应用程序非独占时间**

    - **应用程序独占时间**

    - **调用数**

   所有时间列以绝对值和百分比形式显示。 "**独占**" 一词是指函数在执行此函数的过程中调用的其他函数所花费的时间所用的总时间。

   "**非独占" 这**一术语是指函数所花费的总时间，包括它调用的所有函数的执行时间，以及这些被调用函数中的任何一种函数。

## <a name="select-callercallee-view"></a>选择“调用方/被调用方”视图

在 "**当前视图**" 下拉列表中选择 "**调用方/被调用**方" 视图。 "**调用方/被调用**方" 视图包含以下三个不同的部分：

- **调用的函数**：调用特定函数的所有函数都列在视图的顶部。

- **当前函数**：被调用的特定函数列在视图的中间部分。

- **调用的函数**：特定函数调用的所有函数都列在视图的底部。

如果名为 `SyncToNavigator` 的函数显示在视图的中间部分，则调用 `SyncToNavigator` 函数的所有函数会显示在视图顶部，而 `SyncToNavigator` 函数调用的所有函数显示在视图底部。

- 您可以通过双击列在视图的其他两个部分中的任何函数，更改视图中间部分的函数。 然后，该视图会自动更新，以反映所做的更改。

- 您也可以通过单击列名对数据进行排序。

## <a name="select-call-tree-view"></a>选择调用关系树视图

- 选择 "**当前视图**" 下拉列表中的 "**调用树" 视图**。 此视图为程序执行的关系树视图。

   "**调用关系树" 视图**将树的根显示为进程名称。 函数为关系树中的节点。 此视图允许深化到特定调用跟踪并分析对性能影响最大的跟踪。 视图类似于调试期间可用的 "**调用堆栈" 视图**。 除了**函数视图**中的列之外，还可以在 "**调用关系树" 视图**中显示一个额外的列来显示**模块名称**。

- 在 "**当前视图**" 下拉列表中选择 "**标记**"。

   使用 XSLT 探查器时，会在数据收集流中显示带有关联注释的标记。 标记是代码中放置有计数器的位置。 当您指示 XSLT 探查器收集 XSLT 性能计数器时，每当执行其中一个标记时就会收集这些计数器。 数据显示在包含**标记 ID**、**标记名称**（**启动程序**、**结束程序**）和**时间戳**的表中。 标记不会进行聚合，并按时间顺序显示在性能报告的 "**标记" 视图**中。

## <a name="select-modules-in-the-current-view"></a>选择当前视图中的模块

- 在 "**当前视图**" 下拉列表中选择 "**模块**"。

   模块视图是聚合到模块级别的所有函数的平面列表。 展开或折叠模块名称可显示或关闭模块性能数据的视图。 可以通过单击列名对数据进行排序。 默认情况下，存在已**用非**独占时间、已**用独占时间**、**应用程序非**独占时间、**应用程序独占**时间和**调用数**的绝对值和百分比数字。

- 在 "**当前视图**" 下拉列表中选择 "**处理**"。

   "进程" 视图显示一个表，其中包含**进程 ID**、**进程名称**、**开始时间**和**结束时间**。 可以通过单击列名对数据进行排序。

## <a name="see-also"></a>请参阅

- [演练：使用 XSLT 层次结构](../xml-tools/walkthrough-using-xslt-hierarchy.md)