---
title: 排查调试器中的断点问题 |Microsoft Docs
ms.custom: seodec18
ms.date: 01/23/2018
ms.topic: troubleshooting
author: mikejo5000
ms.author: mikejo
manager: jillfra
ms.workload:
- multiple
ms.openlocfilehash: 7c11741cb9bb9a0b0c64b9452b54daa6ac226b92
ms.sourcegitcommit: 08c144d290da373df841f04fc799e3133540a541
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/17/2019
ms.locfileid: "72535928"
---
# <a name="troubleshoot-breakpoints-in-the-visual-studio-debugger"></a>排查 Visual Studio 调试器中的断点问题

## <a name="breakpoint-warnings"></a>断点警告

调试时，断点有两个可能的视觉状态：红色实心圆圈和空心（白色实心）圆圈。 如果调试器能够在目标进程中成功设置断点，则它将保持一个实心的红色圆圈。 如果断点为空心圆，则在尝试设置断点时，断点处于禁用状态或出现警告。 若要确定差异，请将鼠标悬停在断点上，并查看是否有警告。

以下两节介绍了突出的警告以及如何修复它们。

### <a name="no-symbols-have-been-loaded-for-this-document"></a>“尚未为此文档加载任何符号”

中转到 "**模块**" 窗口（"**调试**"  >  "**Windows**  > **模块**"），并检查是否已加载模块。
* 如果已加载模块，请检查 "**符号状态**" 列以查看是否已加载符号。
  * 如果未加载符号，请检查符号状态以诊断问题。 从 "**模块**" 窗口中的模块上的上下文菜单中，单击 "**符号加载信息 ...** " 以查看调试器在何处尝试并加载符号。 有关加载符号的详细信息，请参阅[指定符号（.pdb）和源文件](../debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger.md)。
  * 如果已加载符号，则 PDB 不包含有关源文件的信息。 下面是几个可能的原因：
    * 如果最近添加了源文件，请确认正在加载该模块的最新版本。
    * 可以使用 **/PDBSTRIPPED**链接器选项创建去除的 pdb。 去除的 Pdb 不包含源文件信息。 确认你使用的是完整 PDB，而不是去除的 PDB。
    * PDB 文件已部分损坏。 删除该文件并执行该模块的干净生成，以尝试解决此问题。

* 如果未加载模块，请检查以下各项以查找原因：
  * 确认正在调试正确的进程。
  * 查看是否正在调试正确的代码类型。 可以在 "**进程**" 窗口中确定调试器配置为调试的代码类型（**调试** > **Windows**  > **进程**）。 例如，如果你尝试调试C#代码，请确认你的调试器配置为适用于 .net 的相应类型和版本（例如，托管（v4 \*）与托管（v2 \*/v3 \*）与托管（CoreCLR））。

### <a name="-the-current-source-code-is-different-from-the-version-built-into"></a>"… 当前源代码不同于 "内置于 ..." 的版本

如果源文件已更改，并且源与正在调试的代码不再匹配，则默认情况下，调试器将不会在代码中设置断点。 通常，当源文件发生更改，但未重新生成源代码时，会发生此问题。 若要解决此问题，请重新生成项目。 如果生成系统认为该项目已是最新的，即使它不是最新的，你也可以通过再次保存源文件或在生成之前清除项目的生成输出来强制重新生成项目系统。

在极少数情况下，你可能想要在没有匹配源代码的情况下进行调试。 不匹配源代码的调试可能会导致混乱的调试体验，因此请确保这是你想要执行的操作。

若要禁用这些安全检查，请执行以下操作之一：
* 若要修改单个断点，请将鼠标悬停在编辑器中的断点图标上，并单击 "设置" （齿轮）图标。 "查看" 窗口将添加到编辑器。 在 "速览" 窗口的顶部，有一个指明断点位置的超链接。 单击超链接可允许修改断点位置，并选中 **"允许源代码与原始版本不同"** 。
* 若要为所有断点修改此设置，请参阅 "**调试**"  > **选项和设置**"。 在 **“调试”/“常规”** 页上，清除 **“要求源文件与原始版本完全匹配”** 选项。 完成调试后，请确保重新启用此选项。

## <a name="the-breakpoint-was-successfully-set-no-warning-but-didnt-hit"></a>已成功设置断点（无警告），但未命中

本部分提供有关在调试器未显示任何警告时解决问题的信息–断点在主动调试的情况下为红色实心圆圈，但未命中断点。

下面是几项需要检查的内容：
1. 如果你的代码在多个进程或多台计算机上运行，请确保正在调试正确的进程或计算机。
2. 确认您的代码正在运行。 若要测试代码是否正在运行，请将对 `System.Diagnostics.Debugger.Break` （C#/VB）或 `__debugbreak` （C++）的调用添加到尝试设置断点的代码行，然后重新生成项目。
3. 如果正在调试优化的代码，请确保设置断点的函数未内联到另一个函数中。 上述检查中所述的 `Debugger.Break` 测试也可以用于测试此问题。

## <a name="i-deleted-a-breakpoint-but-i-continue-to-hit-it-when-i-start-debugging-again"></a>我删除了断点，但在再次启动调试时继续命中该断点

如果在调试时删除了断点，则在下次启动调试时，可能会再次命中该断点。 要停止命中此断点，请确保从 **“断点”** 窗口删除该断点的所有实例。
