---
title: 视觉工作室的复合模式 |微软文档
ms.date: 11/04/2016
ms.topic: conceptual
ms.assetid: e48ecfb2-f4b5-4d3a-b4a2-7a4d62fa4ec0
author: acangialosi
ms.author: anthc
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 500ea8ffe7c33c1d747590ea074bff43fa1a3ab3
ms.sourcegitcommit: 16a4a5da4a4fd795b46a0869ca2152f2d36e6db2
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/06/2020
ms.locfileid: "80698619"
---
# <a name="composite-patterns-for-visual-studio"></a>Visual Studio 的复合模式
复合模式将交互和设计元素合并到不同的配置中。 在视觉工作室中，在一致性方面，一些最重要的复合模式包括：

- [数据可视化](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_DataVisualization)

- [对象 UI 和窥视](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_OnObjectUI)

- [选择模型](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_SelectionModels)

- [持久性和保存设置](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_PersistenceAndSavingSettings)

- [触摸输入](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_TouchInput)

## <a name="data-visualization"></a><a name="BKMK_DataVisualization"></a>数据可视化

### <a name="overview"></a>概述
 图表是一种可视化的数据聚合和可视化方式，以增强决策能力。 它们可以帮助用户面对大量数据，但没有什么意义，看看什么值得注意，什么可能需要采取行动。

 如果以下任一条件为 true，用户将受益于图表：

- 该图表能否帮助用户确定可以执行的任务？

- 该图表是否会使用户能够预测潜在变化的后果？

- 该图表是否有助于用户发现趋势并识别模式？

- 该图表是否允许用户做出更好的决策？

- 图表有助于回答用户在给定上下文中可能拥有的特定问题吗？

#### <a name="general-rules-for-charts"></a>图表的一般规则

- 清楚地标记数据。 没有解释的插图只是漂亮的图片。

- 从零开始轴以避免倾斜比例。 线长和条形大小是了解数据点之间关系的重要视觉提示。

- 创建图表，而不是信息图表。 信息图是数据的艺术表现，其主要目标是视觉故事。 图表可以（而且应该）在视觉上具有吸引力，但让数据为自己说话。

- 避免刻纹、图形条形图、对比哈希标记和其他信息图触摸。

- 请勿将 3D 效果用作装饰元素。 仅当它们真正成为用户理解信息的能力的组成部分时，才使用它们。

- 避免使用多行和填充，因为两种以上颜色会使这种类型的图表难以正确阅读和解释。

- 请勿使用图表（或任何插图）作为理解概念或与数据交互的唯一方法。 这给有视觉障碍的用户带来了困难。

- 请勿将图表用作页面上的无端或装饰元素。 换句话说，如果图表不添加任何值或帮助用户解决问题，请不要使用它。

### <a name="chart-types"></a>图表类型
 Visual Studio 中使用的图表类型包括条形图、折线图、称为环图或"圆环图"的修正饼图、时间线、散点图（也称为"聚类图表"）和甘特图表。 每种类型的图表都可用于传达不同类型的信息。

### <a name="other-charting-considerations"></a>其他图表注意事项

#### <a name="color"></a>Color
 有一个特定的图表颜色调色板定义在视觉工作室中使用。 调色板适用于主要类型的色盲，即使用作非常窄的色片，颜色也可以区分。 您可以在 UI 中的任何类型的图表或图形中将这些颜色以任意组合使用。 如果您不需要那么多不同的颜色，则不需要使用所有七种颜色。 这些颜色的设计不与任何前景元素一起使用，因此不要在这些颜色之上放置文本或字形。 这些色调应硬编码，并在 **"工具>选项**"下公开给用户自定义（请参阅[为最终用户公开颜色](../../extensibility/ux-guidelines/colors-and-styling-for-visual-studio.md#BKMK_ExposingColorsForEndUsers)）。

|样本|Hex|RGB|
|------------|---------|---------|
|![样本 71B252](../../extensibility/ux-guidelines/media/0711_71b252.png "0711_71B252")|#71B252|113,178,82|
|![样本 BF3F00](../../extensibility/ux-guidelines/media/0711_bf3f00.png "0711_BF3F00")|#BF3F00|191,63,0|
|![样本 FCB714](../../extensibility/ux-guidelines/media/0711_fcb714.png "0711_FCB714")|#FCB714|252,183,20|
|![样本 903F8B](../../extensibility/ux-guidelines/media/0711_903f8b.png "0711_903F8B")|#903F8B|144,63,139|
|![样本 117AD1](../../extensibility/ux-guidelines/media/0711_117ad1.png "0711_117AD1")|#117AD1|17,122,209|
|![样本 79D7F2](../../extensibility/ux-guidelines/media/0711_79d7f2.png "0711_79D7F2")|#79D7F2|121,215,242|
|![样本 B5B5B5](../../extensibility/ux-guidelines/media/0711_b5b5b5.png "0711_B5B5B5")|#B5B5B5|181,181,181|

## <a name="on-object-ui-and-peeking"></a><a name="BKMK_OnObjectUI"></a>对象 UI 和窥视
 本节提供用于查看的上下文（也称为代码透视视图）是 Visual Studio 独有的一种对象上 UI 类型。

### <a name="overview"></a>概述

- 对象 UI 应为用户提供更多信息或交互性，而不会减损其主要任务。

- Visual Studio 中对象 UI 的主要模式称为"注意点的信息"。

- Visual Studio 中的对象 UI 是内联的或浮动的，持久或瞬态。

  - 代码透视视图是 Visual Studio 中一种对象上的 UI 类型，是内联和持久的。

  - CodeLens 是可视化工作室中的一种对象上 UI 类型，是浮动和瞬态的

  了解一段代码的工作原理或查找有关该代码的详细信息通常需要开发人员切换上下文并转到其他内容或其他窗口。 这些上下文转换可能具有破坏性，因为如果用户离开主窗口，可能会失去对原始任务的关注。 此外，恢复原始上下文可能很困难，特别是如果切换窗口导致其原始代码被其他 UI 遮盖。

  对象 UI 遵循一种称为"注意点的信息"的模式。 这些消息、弹出窗口和对话框为用户提供了额外的相关信息，这些信息可添加澄清或交互性，而不会失去对主要任务的关注。 对象 UI 的示例包括当用户将指针悬停在通知区域中的图标上时出现的弹出窗口、拼写错误的单词下的红色波浪以及 Visual Studio 2013 中引入的透视视图。

### <a name="decision-points"></a>决策点
 在 Visual Studio 中，有几种方法可以在关注点使用此信息模式。 选择正确的机制，以一致、可预测的方式实施它，对于总体体验至关重要。 否则，用户可能会收到令人困惑或不一致的体验，这会分散内容本身的焦点。

#### <a name="relationships-between-master-and-detail-content"></a>主内容与详细信息内容之间的关系
 关注点的信息用于显示用户关注的内容（"主"内容）与其他相关内容（"详细信息"内容）之间的关系。 在此模式中，详细信息内容与用户正在使用的内容明显相关，并且可以显示在主内容附近。 补充信息或信息，不能汇总，而不压倒主内容应遵循另一种模式，如工具窗口。

- **始终**在靠近主内容的地方显示详细信息内容。

- **始终**确保详细信息内容仍使用户能够始终专注于主内容。 通常，实现此目的的最佳方法是尽可能接近主内容呈现细节内容。 这可以通过在主内容旁边的弹出窗口中呈现详细信息内容，或者通过在主内容下方内联呈现详细信息内容来实现。

- **切勿**在将用户从主内容中移开的注意力点使用信息。 如果用户需要单独查看详细信息内容，则公开允许用户执行此操作的显式操作。

#### <a name="design-details"></a>设计细节
 确定对象 UI 是正确的选择后，有四个主要设计注意事项：

1. **持久性：** 内容是持久还是瞬态？
   用户是否希望保持信息可见以引用或与之交互？ 或者，用户会希望快速浏览信息，然后继续其主要任务？

2. **内容类型：** 内容是信息性的、可操作的还是导航性的？
   用户是否需要有关主内容的其他详细信息？ 用户是否需要完成影响主内容的任务？ 还是需要将用户定向到其他资源？

3. **指标类型：** 环境指示器有意义吗？
   信息能否以有用的方式汇总并显示而不使主内容不堪重负？

4. **手势：** 将使用哪些手势来调用和关闭 UI？
   用户将如何提出详细信息内容并将其发送掉？ 添加手势（如固定以在瞬态和持久状态之间切换）是否有价值？

   这四个决策点中的每一个都会对对象 UI 的主要组件产生影响。

### <a name="on-object-ui-components"></a>对象上 UI 组件

1. 容器（内容演示者）类型

    - 浮动

    - 内联

2. 内容类型

    - 信息：可能是静态或动态的数据

    - 可操作：更改主内容的命令

    - 导航：将用户带到其他窗口或应用程序（如 MSDN）的链接

3. 笔势

    - 调用

    - 解雇

    - 固定

    - 其他交互

4. 持久性和提交模型

    - 暂时性

    - Durable

    - 自动

    - 按需

5. 环境指示器（可选）

    - 波浪线下划线

    - 智能标签图标

    - 其他环境指示器

#### <a name="container-content-presenter-type"></a>容器（内容演示者）类型
 有两个主要选项可用于在关注点呈现内容：

1. **内联：** 内联演示者（如 Visual Studio 2013 代码编辑器中引入的预览视图）通过移动现有内容为新内容提供了空间。

    - 如果您希望用户需要花费大量时间引用您提供的内容或与您提供的内容交互，**则更喜欢**内联演示者。

    - 如果您希望用户希望浏览您提供的信息，**请避免**内联演示者，然后继续其主要任务，尽量减少中断。

2. **浮动：** 浮动演示者的位置尽可能靠近所选内容，但不会更改现有内容的布局。 可以使用各种策略，例如将浮动内容面板显示在所选符号最近的可用空白上。

    - 如果您希望用户希望浏览您提供的信息，**请选择**浮动演示者，然后以最小的中断继续其主要任务。

    - 如果您希望用户需要花费大量时间引用您呈现的内容或与您呈现的内容进行交互，**请避免**浮动演示者。

#### <a name="content-type"></a>内容类型
 有三种主要类型的内容可以显示在任何对象上 UI 容器中。 可以显示这些类型的信息的任意组合。 这三种类型是：

1. **信息性：** 大多数对象 UI 容器将显示某种信息内容。 内容可以表示有关环境当前状态的信息，也可以表示有关环境未来潜在状态的信息。 例如，它可用于显示特定命令（如重构）对现有代码的影响。

    - **始终**使用您显示的信息的规范表示形式。 例如，代码应类似于代码，并带有语法突出显示功能，并且应尊重用户设置的任何字体和其他环境设置。

    - **始终**考虑支持对信息内容的任何操作，如果将相同的信息作为主内容显示，则可能采取这些操作。 例如，如果在对象 UI 容器中显示现有代码，则强烈建议支持浏览和修改该代码的能力。

    - 如果显示表示未来潜在状态的信息性内容，**则始终**考虑使用不同的背景颜色。

2. 可操作：某些对象上的 UI 容器将提供对主内容执行某些操作的能力，例如执行重构操作。

    - **始终**将可操作的命令与信息内容分开放置。

    - **始终**在适当时启用和禁用操作。

    - **始终**引用用于表示对话框中命令的标准准则。

    - **始终**将对象 UI 容器中公开的操作数保持在绝对最小值。 与对象 UI 交互应该是一种轻量级、快速的体验。 用户不必花费精力来管理对象上的 UI 容器本身。

    - **始终**考虑如何以及何时关闭或关闭对象 UI 容器。 最佳做法是，在调用主内容和详细信息内容之间的对话框时，任何结束主内容与详细信息内容之间的对话的操作也应关闭对象上的 UI 容器。

3. **导航：** 某些对象上的 UI 容器包括将用户带到其他窗口或应用程序的链接，例如在用户的 Web 浏览器中打开 MSDN 文章。

    - **始终**使用"打开"准备任何导航链接，以便用户不会因为导航到某些其他内容而感到惊讶。

    - **始终**将导航链接与可操作链接分开。

#### <a name="ambient-indicators-optional"></a>环境指示器（可选）
 环境指示器可能很微妙，包括来自代码其余部分的对比颜色的文本，或很明显的文本，包括波浪形下划线和智能标记图标等滴答声符号。 环境指示器传达其他相关信息的可用性。 理想情况下，即使不需要用户与他们交互，它们也能提供有用的信息。

- **始终**定位环境指示器，使其不会分散用户的注意力或压垮用户。 如果无法以这种方式定位环境指示器，请考虑另一个解决方案。

- **始终**将环境指示器定位尽可能靠近与其相关的内容。

- **始终**尝试创建一个指标，汇总其提供的信息。 请考虑提供可用数据项数的计数（例如，"3 引用"而不是简单的"引用"），或者考虑其他一些汇总数据的方法。

  - 如果指标的数据不能始终计算和显示，则当计算值时，立即考虑提供累进反馈。 例如，请考虑为反映可用数据更新的更改进行动画处理，类似于 Windows Phone 上的电子邮件动态磁贴刷新的方式，因为未读电子邮件的数量会增加。

- **切勿**添加超过用户可以合理接受给定内容的指标。 环境指示器应有用，无需用户进行任何交互。 如果指标需要溢出和其他管理控制来使其进入视野，则它们会失去其氛围。

#### <a name="gestures"></a>笔势
 允许用户保持对主内容的关注的一个关键方面是支持正确的手势来打开和关闭其他详细信息内容。

- **始终**要求用户执行一些显式手势以打开其他内容。 常见的开放手势包括：

  - **悬停：** 工具提示或非交互式信息内容

  - **显式命令：** 内联演示者

  - **双击环境指示器：** CodeLens 弹出窗口

- **每当**用户按下 Esc 键时，始终关闭详细信息内容。

- **始终**考虑对象 UI 的上下文。 对于允许在容器内交互的内容演示者，请仔细考虑是否显示有关悬停的其他信息，这可能会破坏用户的工作流。

- **切勿**在悬停上显示看似可编辑的内容，也不要邀请用户交互。 如果用户尝试将光标移到详细信息内容上，则此行为可能会使用户感到沮丧，因为工具提示的标准行为是在光标不再位于生成该内容的主内容上时立即关闭。

## <a name="selection-models"></a><a name="BKMK_SelectionModels"></a>选择模型

### <a name="overview"></a>概述
 选择模型是用于指示和确认用户界面中一个或多个感兴趣对象的操作的机制。 本主题讨论 Visual Studio 文档编辑器中的选择交互模式：文本编辑器、设计曲面和建模曲面。

 用户必须有一种方式向 Visual Studio 指示他们正在处理的内容，Visual Studio 必须以可预测的方式响应用户有关其操作内容的反馈。 用户和用户界面之间的差异或沟通不当可能导致用户没有注意到操作，从而产生意外的后果。 通常，在用户看到某些内容丢失或已更改之前，该错误才会被注意到。 因此，选择模型是用户界面设计中最重要的部分之一。 尽管 Visual Studio 中的选择模型与 Windows 一致，但存在细微的变化。

 在 Visual Studio 中，如 Windows 中一样，选择模型因交互发生的上下文而异。 选择可以发生在四种类型的对象中：

- Text

- 图形对象

- 列表和树

- 网格

  在这些对象中，有三种类型的选择：

- 连续

- 脱节

- 区域

#### <a name="scope"></a>范围
 选择的最重要组成部分是确保用户知道他们正在哪个窗口中工作（激活）以及焦点位于何处（选择）。 Visual Studio 扩展了 Windows 中的窗口管理功能，但激活方案是相同的：与窗互会将焦点带到窗口。 Visual Studio 有两个用于激活的指标：一个用于文档窗口，另一个用于工具窗口。

 对于文档窗动窗口由文档窗口选项卡指示，该选项卡位于前面并更改其背景颜色：

 ![Visual Studio 中的“活动”选项卡选择](../../extensibility/ux-guidelines/media/0713-01_activetab.png "0713-01_ActiveTab")

 **活动选项卡选择**

 对于工具窗动窗口由工具窗口的标题栏区域颜色变化指示：

 ![Visual Studio 中的”活动”工具窗口选择](../../extensibility/ux-guidelines/media/0713-02_activetoolwindow.png "0713-02_ActiveToolWindow")

 **显示节点主要选择的活动工具窗口**

 ![Visual Studio 中的”非活动”工具窗口选择](../../extensibility/ux-guidelines/media/0713-03_inactivetoolwindow.png "0713-03_InactiveToolWindow")

 **非活动工具窗口，显示节点的潜在选择**

 窗口处于活动状态后，将根据指南本节中概述的选择模型指示其焦点。

#### <a name="context"></a>上下文
 Visual Studio 旨在保留强大的上下文概念，跟踪用户的工作位置。 只有一个窗口处于活动状态，无论是工具还是文档窗口。 但是，最顶层的文档窗口始终保留潜在选择。 尽管焦点可能位于工具窗口中，但上次处于活动状态的文档窗口将显示所选内容，即使在非活动状态下也是如此。 这样做是为了在编辑的文档中保留用户的上下文，向他们显示 Visual Studio 已保留其状态，以便他们可以在工具窗口和文档窗口之间无缝返回和移动。

### <a name="text-selection"></a>文本选择
 严格文本的可视化 Studio 编辑器（如内置文本编辑器）使用与 MSDN 上的 Windows 用户体验交互指南的["鼠标和指针"](/windows/desktop/uxguide/inter-mouse)页面中描述的相同文本选择模型和外观。 文本编辑器中的输入焦点由称为插入点的垂直条表示。 插入点是一个像素厚，颜色为与它后面出现的任何一点的相反。 它根据"控制面板"中的**键盘**小程序**速度**"选项卡中的**光标闪烁速率**设置的速率闪烁。

#### <a name="contiguous-and-disjoint-selection"></a>连续和不交的选择
 文本编辑器中的选择仅连续。 不允许不相交的文本选择，但应在图形对象编辑器中寻址。 当用户的鼠标指针位于文本区域上时，光标将更改为 I 束。 只需单击一下，即可将插入点置于单击位置的文本编辑器中。 按住鼠标按钮将启动选择高光，释放鼠标按钮结束选择高光。

#### <a name="region-selection-box-selection"></a>区域选择（框选择）
 Visual Studio 支持文本编辑器中的区域选择，这称为框选择。 框选择允许用户选择不遵循常规文本流的文本区域。 与标准文本选择一样，所选内容必须是连续的。 使用鼠标拖动时按住 Alt 键启动框选择。 也可以通过按住 Alt 和 Shift 键来启动框选择，同时使用箭头键指示选择区域。 框选择使用正常选择高光，并显示插入点光标在选择区域末尾闪烁。

 ![视觉工作室中区域&#40;盒&#41;选择](../../extensibility/ux-guidelines/media/0713-04_boxselection.png "0713-04_BoxSelection")

 **视觉工作室中的区域（框）选择**

#### <a name="text-selection-appearance"></a>文本选择外观
 可以自定义用于编辑器中活动和非活动选择的颜色。 要自定义编辑器的视觉外观，用户可以转到**工具>选项**，然后在**环境>字体和颜色>文本编辑器**下查看。

### <a name="graphical-selection"></a>图形选择

#### <a name="interaction"></a>交互
 图形对象选择可能很复杂，具体取决于许多因素：

- **编辑器的主选择模型。** 包含图形对象的编辑器也可用于编辑文本或网格。 例如，编辑器可能是基于文本的编辑器，该编辑器还支持图形对象的位置，例如 Visual Studio XAML 设计器。 支持多个对象类型可能会影响用户选择由不同类型的对象组成的组的方式。

- **支持主选择和辅助选择状态。** 编辑器可以提供主选择和辅助选择状态，以便可以一致地编辑对象、相互对齐、一起调整大小等。

- **就地编辑支持。** 编辑人员还可以允许编辑其图形对象的内容。 例如，矩形形状可能还包含内部用户可以更改的文本。 此外，该文本可以居中或对齐。 就地编辑涉及更详细的用户交互级别，因此需要一组适当的视觉提示来向用户显示状态信息。

#### <a name="mouse-interaction"></a>鼠标交互

|输入|结果|
|-----------|------------|
|单击未选择的对象|选择对象并显示虚线和选择控点（如果对象可调整大小）。|
|单击所选对象|如果对象支持，则激活就地编辑。 单击对象外部将停用就地编辑模式。|
|双击对象|打开对象后面的代码进行编辑，并可能插入默认事件处理程序（如果适用）。|
|指向对象|更改指向移动光标的指针。 对象的外观（如亮度或颜色）可能会更改。|
|指向选择句柄|更改指向调整光标的指针。 对于支持旋转的对象，某些选择控点可能会更改指向旋转光标的指针，因为指针相对于选择句柄的定位不同（例如，移动得更远）。|
|拖动|即使以前未选择对象，也会更改指向移动光标的指针并移动对象。|
|编辑器失去焦点|停用就地编辑模式，尽管对象保留其上次操作/选择状态期间的内容和外观。|
|对象选择|由边框、虚线或其他视觉上截然不同的处理指示，以突出显示对象的边界。|
|调整所选对象的大小|由选择控点指示。<br /><br /> 可调整大小的对象有八个控点，表示可以调整大小的每个方向。 如果对象只能在某些方向上调整大小，则可以使用较少的句柄。 当用户将对象大小调整到八个句柄不是交互式的位置时，可以使用四个句柄。 处理大小应与窗口边框和边缘指标绑定，使用**GetSystemMetrics** API 函数的大小与显示分辨率成比例。<br /><br /> ![重设句柄大小](../../extensibility/ux-guidelines/media/0713-05_resizehandles.png "0713-05_ResizeHandles")|
|旋转选定对象|![旋转句柄](../../extensibility/ux-guidelines/media/0713-06_rotate.png "0713-06_Rotate")|

#### <a name="keyboard-interaction"></a>键盘交互

|输入|结果|
|-----------|------------|
|选项卡|在编辑器中对象的逻辑顺序之间移动焦点指示器。 根据**TabIndex（** 或等效）属性值、对象创建顺序以及编辑器的总体用途，这可能从左到右或从上到下。 Shift_Tab 反转焦点指示器的方向。|
|空格键|保持击键时激活平移模式。 需要额外的鼠标输入来平移视口位置。|
|Ctrl+空格键|保持击键时激活缩放模式。 需要额外的鼠标输入来增加和减小缩放系数。|
|Ctrl_Alt_减号|将缩放系数减小一个级别。|
|Ctrl_Alt_加号|将缩放系数增加一个级别。|
|移位或 Ctrl|将对象添加到选择组。 Ctrl 还允许您从选择组中单独删除对象。|
|Enter|对对象执行默认命令（通常为"打开"或"编辑"）。|
|F2|激活对象的就地编辑。|
|箭头键|以较小的增量（例如，一次 1 像素）向按下箭头键的方向移动所选对象|
|Ctrl_箭头键|以更大的增量（例如，一次 10 像素）按箭头键的方向移动所选对象|
|移位+箭头键|以较小的增量调整所选对象的大小（例如，一次 1 像素）|
|Ctrl_Shift_箭头键|以较大幅度（例如，一次 10 像素）调整所选对象的大小（|

 当用户就地编辑控件时，对象使用用户输入自动调整大小可能有意义。 例如，如果用户编辑了标签控件，则标签应增长以显示用户刚刚键入的文本。 如果未完成此操作，则用户必须在编辑文本后手动调整控件的大小。 如果用户有很多控件，这将成为一个死记硬背的任务。

#### <a name="graphical-containers"></a>图形容器
 在某些情况下，图形编辑器为其他图形对象（如 Windows 窗体面板控件或 HTML 设计器中的网格布局控件）提供容器。 如果编辑器为其他图形对象提供容器，则以下选择模型应仅用于容器（容器中的对象遵循上述标准模型）：

|输入|结果|
|-----------|------------|
|单击容器|选择容器对象而不直接选择任何包含的对象。 容器可以使用标准鼠标和键盘输入（如上所述）移动和/或调整大小。 包含的对象相对于容器移动，但包含的对象不会调整大小，除非它们也直接被选中。|
|将鼠标悬停在容器的边界区域上|将鼠标转换为移动光标，指示可以移动容器。|
|拖动容器的边界区域|将鼠标更改为移动光标并移动容器（以及包含的对象）。 如果不首先单击一下，则无法移动容器。|
|单击容器内的对象|取消选择容器（如果选中），并仅选择单击的对象。|
|Shift_单击或点击包含的对象和/或容器|将单击的对象添加到现有选择或选择组。 如果单击的对象已经是选择组的成员，则从选择组中删除它。|

 包含的对象应符合上一节所述的基本选择模型。 从 Windows 窗体设计器的可用性测试中，用户期望无缝访问包含的对象，而无需干预步骤（由包含对象强制实施）。

#### <a name="disjoint-and-region-selections"></a>不相交和地区选择
 图形对象编辑器应支持不相交的选择。 请注意，此图形不显示 Visual Studio 的控制外观。 有关详细的视觉规格，请参阅[图形对象选择外观](../../extensibility/ux-guidelines/composite-patterns-for-visual-studio.md#BKMK_GraphicalObjectSelectionAppearance)。

 ![非连续选择器和区域选择器](../../extensibility/ux-guidelines/media/0713-07_disjointregionselectors.png "0713-07_DisjointRegionSelectors")

 **不相交选择**

 图形编辑器还应提供带有选框类型选择指示器的区域选择。 如果图形编辑器支持其他对象类型（如文本），则根据这些其他对象类型的约束，可能无法选择区域。

 ![字幕选择](../../extensibility/ux-guidelines/media/0713-08_marqueeselection.png "0713-08_MarqueeSelection")

 **字幕选择**

#### <a name="primary-and-secondary-selections"></a>主要和次要选择
 某些图形对象编辑器允许用户编辑或对齐组中的对象。 在这种情况下，需要引入主选择和辅助选择的概念。 主选择是所有其他对象响应组操作的对象。 用户首先选择的对象将成为主控件，后续选择将成为辅助选择。 主选择具有与辅助选择不同的可视处理，以指示哪个对象是主要对象：

 ![主要和次要选择](../../extensibility/ux-guidelines/media/0713-09_primarysecondary.png "0713-09_PrimarySecondary")

 **具有两个辅助选择的主选择**

#### <a name="graphical-object-selection-appearance"></a><a name="BKMK_GraphicalObjectSelectionAppearance"></a>图形对象选择外观
 选择控点是围绕对象边界框以矩形图案绘制的正方形。 下图显示了图形对象具有句柄、大小调整和就地编辑外观的各种状态的示例。 使用**GetSystemMetrics** API，句柄的大小应绑定到窗口边框和边缘指标。

| 状态 | 外观 | 视觉细节 |
|-------------------------|---------------| - |
| **未选定** | 默认 | ![默认按钮状态](../../extensibility/ux-guidelines/media/0713-10_defaultstate.png "0713-10_DefaultState") |
| **主要选择** | 可调整大小 | ![具有重设大小句柄的主要选择](../../extensibility/ux-guidelines/media/0713-11_primaryresize.png "0713-11_PrimaryResize") |
| **主要选择** | 不可调整大小 | ![没有重设大小句柄的主要选择](../../extensibility/ux-guidelines/media/0713-13_primarynoresize.png "0713-13_PrimaryNoResize") |
| **主要选择** | 已锁定 | ![锁定的主要选择](../../extensibility/ux-guidelines/media/0713-15_primarylocked.png "0713-15_PrimaryLocked") |
| **次要选择** | 可调整大小 | ![具有重设大小句柄的次要选择](../../extensibility/ux-guidelines/media/0713-17_secondaryresize.png "0713-17_SecondaryResize") |
| **次要选择** | 不可调整大小 | ![没有重设大小句柄的次要选择](../../extensibility/ux-guidelines/media/0713-19_secondarynoresize.png "0713-19_SecondaryNoResize") |
| **次要选择** | 已锁定 | ![锁定的次要选择](../../extensibility/ux-guidelines/media/0713-21_secondarylocked.png "0713-21_SecondaryLocked") |
| **UI 活动** | 默认 | ![UI 活动状态](../../extensibility/ux-guidelines/media/0713-23_uiactive.png "0713-23_UIActive") |

### <a name="view-selection-models"></a>查看选择模型

#### <a name="tree-view"></a>树视图
 树视图中的选择以简单的高光显示。 如果用户单击节点名称或节点图标，则节点将被选中。 节点左侧的三角形字形展开或收缩树控件，但不影响用户的选择，但有一个例外：当所选内容位于该节点的子节点上时折叠父节点时，所选内容将移动到父节点。

 ![Visual Studio 中的典型树视图](../../extensibility/ux-guidelines/media/0713-25_treeview.png "0713-25_TreeView")

 **Visual Studio 中的典型树视图**

 树视图可以支持连续和不相交的选择，即使在树中的多个级别也是如此。 必须在可见的树节点上进行连续或不交的多个选择。 如果节点折叠，则不交接合的选择将丢失，折叠的节点将获取该选择。 这样，用户可以看到受操作影响的节点。 当节点折叠时，不清楚哪些节点可能会受到影响。

 选择父节点时，该操作应应用于父节点，但在某些情况下，操作应用于父节点及其所有子节点可能有意义。 在这种情况下，请在操作期间提供其他 UI，例如复选框或确认对话框，以使"适用于所有子级"选项显式提供给用户。

##### <a name="renaming"></a>重命名
 如果树中的节点支持重命名，则应进行重命名。 就地操作应是 Visual Studio 中所有树控件的标准。 提供立即激活就地编辑模式的重命名命令，文本选择覆盖节点的整个名称，随时接受用户输入。 如果节点表示文件，则文件名应包含扩展名。 选择突出显示应仅包括文件名的正文，而不是扩展名。

|输入|结果|
|-----------|------------|
|Enter 键|提交重命名操作|
|Esc 键|取消重命名操作|
|单击就地编辑区域外部|提交重命名操作|
|撤消|轻松撤消取消重命名操作|

#### <a name="selection-within-lists-and-grid-controls"></a>列表和网格控件中的选择
 列表选择中的关键概念是，它是基于行的，这意味着当进行选择时，整个行将作为一个单元进行选择。 相反，网格可以允许选择特定的单元格，而不会影响行的任何其他方面。 网格还可能包含嵌套行的层次结构（如树网格中），该层次结构允许通过与父行交互来选择和取消选择层次结构的整个分支。 列表中的选择由整个数据行上的简单高光颜色显示。 焦点由当前可编辑行或单元格周围的单像素虚线边框显示（如果所有单元格都是只读的行）。

> [!NOTE]
> **焦点**和**选择**是不同的概念。 *Focus*指示哪个 UI 元素用于接收未显式定向到另一个对象的输入，而*选择*是指对象包含在一组对象中的状态，以便进行后续操作。

 列表中的选择可以是连续的、不相交的或区域。 当允许多个选择时，应始终支持连续和不相联的选择，而对区域（框）选择的支持是可选的。 区域选择是通过在列表正文的空白中拖动来启动的。

| Object | 选项 |
|--------|------------|
| 列出 | 连续 |
| 列出 | 脱节 |
| 列出 | 区域 |

 单击列表一次将选择发生单击的行。 如果用户碰巧在支持就地编辑的列表单元格中单击，则该单元格也会立即激活以进行就地编辑。 否则，将立即选择整行并显示高光。

 在列表正文中拖动可以执行以下三项操作之一：

- 如果列表支持区域选择，并且鼠标向下为空白，则启动区域选择

- 如果列表单元格或行支持作为拖动源，则启动拖放操作

- 选择当前行

##### <a name="in-place-editing"></a>就地编辑
 允许就地编辑时，有两个基本模型：简单的编辑控件和属性选取器。 使用简单的编辑控件，内容将突出显示，并在激活就地编辑后立即准备好供用户输入。 实现属性选取器时，激活就地编辑模式后，将显示调用属性选取器的按钮，并且当前选择不会突出显示。 单元格中选取器按钮应正确对齐。 有关就地编辑示例，请参阅可视化工作室中**的属性窗口**和**任务列表**。

##### <a name="keyboard-support"></a>键盘支持
 对列表和网格中选择的键盘支持遵循标准 Windows 约定：

- 箭头键导航列表，在移动焦点时选择每行/单元格。

- Shift + 箭头在箭头键的方向执行连续选择。

- Ctrl + 箭头后跟空格键在从所选内容添加和删除列表项之间切换，从而创建不相交的选择。

- 对于包含嵌套层次结构的网格，右箭头键展开父行，左箭头键折叠一个。

- 如果单元格是可编辑的，选项卡键在当前行的单元格之间移动焦点。

- Enter 键对列表中的项执行默认命令（通常**为"打开**"。

- F2 键激活当前所选单元格的就地编辑。

## <a name="persistence-and-saving-settings"></a><a name="BKMK_PersistenceAndSavingSettings"></a>持久性和保存设置

### <a name="overview"></a>概述
 尽管 Visual Studio 中的每个软件组件通常负责其自身的状态和持久性，但 Visual Studio 在某些情况下（如窗口大小和位置）会自动保存设置。 下表是自动保存的设置和需要执行显式用户或编程操作的设置的组合。

|Object|要保存的内容|何时保存|保存位置|
|------------|------------------|------------------|-------------------|
|可选对象（例如，一行代码）|代码行上的断点<br /><br /> 与代码行关联的用户快捷方式|保存项目时|项目**的用户选项 （.suo）** 文件|
|对话框|对话框的位置（如果已移动）<br /><br /> 用户上次在对话框中使用的视图|当对话框关闭时<br /><br /> 可视化工作室会话结束时|在内存中<br /><br /> **HKEY_Current_User**注册|
|窗口|窗口的大小和位置|当窗口关闭时<br /><br /> 当视觉工作室模式更改时<br /><br /> 可视化工作室会话结束时|项目**的用户选项 （.suo）** 文件<br /><br /> 窗口设置的自定义选项文件|
|Document|文档中的当前选择<br /><br /> 文档的视图<br /><br /> 用户访问的最后几个位置|保存文档时|项目**的用户选项 （.suo）** 文件|
|Project|对文件的引用<br /><br /> 对磁盘上的目录的引用<br /><br /> 对其他软件的引用<br /><br /> 组件<br /><br /> 有关项目本身的状态信息|保存项目时|项目文件|
|解决方案|对项目的引用<br /><br /> 对文件的引用|保存项目或解决方案时|**解决方案 （.sln）** 文件|
|**工具中的设置>选项**|键盘自定义<br /><br /> 工具栏自定义项<br /><br /> 配色方案|当 **"工具>选项"** 对话框关闭时<br /><br /> 可视化工作室会话结束时|**HKEY_Current_User**注册|

 用户正在执行的操作，以及执行此操作时，会决定设置是否保存在内存中（在会话期间），是否作为项目或解决方案文件本身的一部分保存到磁盘（作为注册表设置跨会话）、解决方案**选项 （.suo）** 文件的一部分，还是作为仅软件组件知道的自定义设置文件。 上表显示了多个可以保存设置的事件。 但是，在其他时间，您可能需要保存状态：

- 当用户更改对话框或窗口中的位置时

- 当用户将焦点转移到另一个窗口时

- 当用户从设计切换到调试模式时

- 当用户注销其帐户时

- 当计算机进入休眠状态或关闭时

- 当计算机/硬盘驱动器即将重新格式化并重新设置时

### <a name="window-configurations"></a>窗口配置
 窗口配置是开发环境的基本表示 - 它是一个方案，由存在的工具窗口列表和排列方式组成。 对于由 IDE （IDE 窗口）管理的窗口，每个用户将保留布局信息，因此当用户启动 IDE 时，窗口布局将显示与上次退出 Visual Studio 时相同。 IDE 窗口的状态和位置保存在 XML 格式的自定义选项文件中。 由加载到 IDE 中的包创建的工具窗口在注册表中保留其状态信息，并且可能由用户保留，也可能不是每个用户。

#### <a name="profile-specific-layouts"></a>特定于配置文件的布局
 每个配置文件都包括工具窗口布局，以特定开发人员角色熟悉的方式组织（可视C++开发人员希望看到 IDE 左侧**的解决方案资源管理器**，而 C# 开发人员希望看到右侧**的解决方案资源管理器**）。 用户在启动时选择配置文件后加载特定于配置文件的窗口布局。 包作者应确定最适合其客户体验的窗口布局，因为知道用户对窗口配置所做的更改将被保留。

## <a name="touch-input"></a><a name="BKMK_TouchInput"></a>触摸输入
 用户越来越多地在触摸设备上使用 Microsoft 开发产品。 但是，存在一些障碍，使得在触摸设备上使用开发工具变得困难。 用户希望我们的产品提供可靠、精确的触摸体验。 这些指南的目的是为决定要整合哪些触摸功能提供信息，并鼓励跨 Visual Studio 和相关产品获得一致的触摸体验。

### <a name="levels-of-experience"></a>经验水平
 以下经验级别旨在作为指南，帮助团队根据所需的接触投资兴趣水平决定提供哪种触摸功能。

- **基本体验**是希望提供触摸功能的团队，因此整个工作没有死胡同。

- **优化的体验**适用于希望提供最常见的触摸功能的团队（例如，互联网浏览器应用程序中通常可用的功能）。

- **提升体验**适用于希望添加手势或其他可选功能等功能的团队，这些功能可以使应用程序先触摸友好。

||基本经验|优化体验|提升体验|
|-|----------------------|--------------------------|-------------------------|
|允许用户...|修复代码和解决方案/项目级读取，无死角|执行维护、重构和导航任务|自信地以一致、直观和流畅的体验操作|
|编辑器|触摸平移和选择<br /><br /> 滚动条触摸以跳转并按+拖动|捏合缩放<br /><br /> 快速滚动<br /><br /> 选项<br /><br /> 易于使用上下文菜单||
|顶部工具窗口|列表平移<br /><br /> 项选择<br /><br /> 滚动条触摸以跳转并按+拖动|轻松的项目滚动和选择||
|窗口化||调整窗口大小<br /><br /> 快速访问||
|文档良好||打开的文件之间的轻松导航||
|笔势||确保常见手势在整个 IDE 中工作|基于手势的操作<br /><br /> 支持拖放和设计器|
|其他注意事项|||自定义屏幕键盘|

#### <a name="gestures"></a>笔势
 手势为用户提供了指向可能需要更复杂的交互的命令的快捷方式。 请参阅有关[桌面应用程序常见触摸手势的](/windows/desktop/wintouch/windows-touch-gestures-overview)Windows 指南，并遵循本指南，查看大多数手势，包括简单的手势，如平移和缩放。
