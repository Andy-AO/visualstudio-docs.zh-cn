---
title: 测试区域 3：签出撤消签出 |微软文档
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- source control plug-ins, checkout
- source control plug-ins, undo checkout
- source control [Visual Studio SDK], checking out
- source control [Visual Studio SDK], undo checkout
ms.assetid: ce00c5a5-d472-4f45-8776-d77a1fbe9d37
author: acangialosi
ms.author: anthc
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 5365da1e342df5aea9c1b1cd2ae5a446baea57f1
ms.sourcegitcommit: 16a4a5da4a4fd795b46a0869ca2152f2d36e6db2
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/06/2020
ms.locfileid: "80704607"
---
# <a name="test-area-3-check-outundo-checkout"></a>测试区域 3：签出/撤消签出
此源代码管理插件测试区域涵盖通过 **"签出**"和 **"撤消签出**"命令从版本存储编辑和还原项目。

**签出**：将版本存储中的项目标记为签出，将本地副本修改为读/写。

**撤消签出**：在已签入时在版本存储中标记项目，在签出之前将本地副本还原到状态（具体取决于选项）。

## <a name="command-menu-access"></a>命令菜单访问

测试用例[!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]中使用了以下集成开发环境菜单路径。

##### <a name="check-out"></a>签出：

- **文件**，**源代码管理**，**签出**.

- **文件**，**签出**.

- 快捷菜单，**签出**。

- 撤消签出：**文件**，**源代码管理**，**撤消签出**。

## <a name="common-expected-behavior"></a>常见预期行为

- 签出操作后，目标文件（s）和/或文件夹（s）在版本存储中标记为签出。

- 版本存储将签出属性属性属性为正确的用户。

- 结帐的时间和日期是正确的（根据用户的设置）。

## <a name="test-cases"></a>测试用例

以下是结帐/撤消结帐测试区域的特定测试用例。

### <a name="case-3a-check-out"></a>案例 3a：签出

本节重点介绍签出命令的操作。

|操作|测试步骤|要验证的预期结果|
|------------|----------------|--------------------------------|
|签出独占 （COE） 客户端项目|1. 创建客户端项目。<br />2. 将解决方案添加到源代码管理。<br />3. 只签出整个项目（**文件**，**签出**）。|签出发生。|
|签出独占 （COE） 文件系统或本地 IIS Web 项目|1. 将 Web 服务器连接设置为**工具**、**选项**、**项目****、Web 设置**中的文件共享。<br />2. 创建 Web 项目。<br />3. 将解决方案添加到源代码管理。<br />4. 完全签出整个项目（**文件**、**源代码管理**、**签出**）。|签出发生。|
|查看解决方案中的解决方案项（处理其他文件的新方法）|1. 创建空白解决方案。<br />2. 将解决方案添加到源代码管理。<br />3. 查看解决方案。<br />4. 添加几个解决方案项。<br />5. 签入所有新添加的项目。<br />6. 选择多个解决方案项。<br />7. 签出所选项目（快捷菜单，**签出**）。|已签出所选文件。|
|签出本地版本（如果正在测试的插件支持此功能）|1. 用户 1：创建客户端项目。<br />2. 用户 1：将解决方案添加到源代码管理。<br />3. 用户 2：将解决方案从源代码管理打开到另一个位置。<br />4. 用户 2：签出文件。<br />5. 用户 2：修改文件。<br />6. 用户 2：签入文件。<br />7. 用户 1：签出文件的本地版本（**在"签出"** 对话框中**查看本地版本**高级选项）。|签出文件的本地版本。<br /><br /> 用户 2 的修改不应用于用户 1 文件。|

### <a name="case-3b-disconnected-check-out"></a>案例 3b：已断开连接签出

在断开连接模式下操作允许用户在未直接连接到版本存储时提供某种程度的持续源代码管理支持。 这是通过本地缓存有关已登记的解决方案和项目的所有相关信息来完成的。

只有在连接到源代码管理存储时，才能执行独占签出操作。 共享签出操作可随时发生，无论是已连接还是断开连接。 因此，当从版本存储断开连接时，仅启用**签出共享**（COS） 命令。 断开连接时，撤消**签出**将禁用，因为无法检索旧版本以替换用户所做的更改。

当用户重新连接到版本存储时，所有已登记的解决方案和项目的签出状态将同步。 这将对存储执行用户执行的签出进行必要的更新。 同步发生后，用户能够继续正常工作（已连接）。

#### <a name="expected-behavior"></a>预期行为

- 与版本存储断开连接时，无法使用 **"签出独占"** 命令。

- 与版本存储断开连接时，无法使用 **"撤消签出**"命令。

- **共享签出**命令工作。

|操作|测试步骤|要验证的预期结果|
|------------|----------------|--------------------------------|
|断开连接时，签出文件，然后连接以进行同步|1. 使用更改源代码管理对话框（**文件**、**源代码管理**、**更改源代码管理**）断开受控项目。<br />2. 签出文件。<br />3. 在警告对话框中单击"签出（断开连接）"。<br />4. 编辑文件。<br />5. 使用"更改源控制"对话框进行连接。<br />6. 获取编辑文件的最新版本。|常见预期行为|

### <a name="case-3c-query-editquery-save-qeqs"></a>案例 3c：查询编辑/查询保存 （QEQS）
 跟踪源代码管理的项目进行编辑、更改和保存，以帮助用户轻松管理其文件。 编辑"签入"的受控项目时，QEQS 会拦截尝试的编辑，并询问用户是否要签出该文件以对其进行编辑。 根据**工具**、**选项**设置，用户要么被迫签出文件以进行编辑，要么可能允许编辑内存中的副本，然后签出。 如果用户**的工具，****选项**设置未设置为显示签出对话框，只是签出它，然后当用户进行编辑时，文件会自动签出，只要可能。

#### <a name="expected-behavior"></a>预期行为

- 签出操作后，目标文件（s）和/或文件夹（s）在版本存储中标记为签出。

- 版本存储将签出属性属性属性为正确的用户。

- 签出的时间和日期正确（根据用户的设置）。

- 目标文件或文件夹的本地副本是可写入的。

|操作|测试步骤|要验证的预期结果|
|------------|----------------|--------------------------------|
|编辑签入的文本文件|1. 创建包含文本文件的新项目。<br />2. 将解决方案添加到源代码管理。<br />3. 设置**工具**，**选项**，**源代码管理**，**允许在磁盘上只读时编辑文件**以取消选中。<br />4. 设置**工具**，**选项**，**源代码管理**，**提示签出****时签入的文件被编辑**组合框.<br />5. 设置**工具**，**选项**，**源代码管理**，**提示签出****时签入的文件保存**组合框.<br />6. 在编辑器中打开文本文件，尝试在文件中键入新文本。 如果此步骤成功，请继续执行下一步。<br />7. 在 **"签出编辑"** 对话框中单击 **"取消**"。 如果此步骤成功，请继续执行下一步。<br />8. 设置**工具**，**选项**，**源代码管理**，**允许在磁盘上只读时编辑文件**以进行检查。<br />9. 在编辑器中打开项目文件，尝试在文件中键入新文本。 如果此步骤成功，请继续执行下一步。<br />10. 在 **"签出编辑"** 对话框中单击 **"编辑**"。 如果此步骤成功，请继续执行下一步。<br />11. 编辑文本文件并尝试保存它。|`Result of step 6:`<br /><br /> 签出"编辑"对话框。<br /><br /> `Result of step 7:`<br /><br /> 文件保持不变。<br /><br /> `Result of step 9:`<br /><br /> 签出"编辑"对话框。<br /><br /> `Result of step 10:`<br /><br /> 您可以在内存中编辑项目文件。<br /><br /> `Result of step 11:`<br /><br /> 保存时，将显示"签出保存"对话框。|
|编辑签入的解决方案文件|重复上一个测试中描述的步骤，但不要修改文本文件，而是通过更改解决方案属性来修改解决方案。|与前一次测试相同|
|编辑签入的项目文件|重复上一个测试中描述的步骤，但不要修改文本文件，而是通过更改项目属性来修改项目。|与以前的测试相同。|

### <a name="case-3d-silent-check-out"></a>案例 3d：静默签出
 此子区域涵盖签出方案，其中"**签出"** 对话框未按用户**的工具**、**选项**、**源代码管理设置**显示。

#### <a name="expected-behavior"></a>预期行为

- 签出操作后，目标文件（s）和/或文件夹（s）在版本存储中标记为签出。

- 版本存储将签出属性属性属性为正确的用户。

- 签出的时间和日期正确（根据用户的设置）。

- 目标文件或文件夹的本地副本是可写入的。

|操作|测试步骤|要验证的预期结果|
|------------|----------------|--------------------------------|
|文件的静默签出|1. 设置**工具**，**选项**，**源代码管理**以**自动签出文件编辑**.<br />2. 使用文件创建新项目。<br />3. 将解决方案添加到源代码管理。<br />4. 签出文件。|文件以静默方式签出（无 UI）。|
|项目的静默签出|1. 设置**工具**，**选项**，**源代码管理**以**自动签出文件编辑**.<br />2. 创建新项目。<br />3. 将解决方案添加到源代码管理。<br />4. 查看项目。|文件以静默方式签出（无 UI）。|

### <a name="case-3e-undo-check-out"></a>案例 3e：撤消签出
 **撤消签出**用于取消文件的签出状态，并避免签入对文件所做的更改。

#### <a name="expected-behavior"></a>预期行为

- 默认值基于用户的 **"签出本地版本"** 设置。 如果用户选择签出本地版本，则撤消签出的默认值是始终恢复到已签出的版本。

- 接受撤消后，**解决方案资源管理器**中的图标将更新受影响的文件，并且该项目将从**挂起签入窗口**中删除。

|操作|测试步骤|要验证的预期结果|
|------------|----------------|--------------------------------|
|撤消签出的单个文件（独占文件）的签出|1. 创建客户端项目。<br />2. 将解决方案添加到源代码管理。<br />3. 专门签出文件。<br />4. 修改文件。<br />5. 撤消签出（**文件**，**源代码管理**，**撤消签出**）。|常见预期行为。|
|撤消签出共享的单个文件的签出|1. 创建客户端项目。<br />2. 将解决方案添加到源代码管理。<br />3. 签出共享的文件。<br />4. 修改文件。<br />5. 撤消签出（**文件**，**源代码管理**，**撤消签出**）。|常见预期行为。|
|向项目添加文件后撤消项目签出|1. 创建新项目并将其添加到源代码管理。<br />2. 查看项目。<br />3. 向项目添加文件。<br />4. 撤消项目签出。|添加的文件将从解决方案资源管理器中的项目中删除。<br /><br /> 不再签出项目。|
|从项目中删除文件后撤消项目签出|1. 创建新项目并将其添加到源代码管理。<br />2. 查看项目。<br />3. 从项目中删除文件。<br />4. 撤消项目签出。|已删除的文件将显示在解决方案资源管理器中的项目下。<br /><br /> 不再签出项目。|

## <a name="see-also"></a>请参阅
- [源代码管理插件的测试指南](../../extensibility/internals/test-guide-for-source-control-plug-ins.md)
