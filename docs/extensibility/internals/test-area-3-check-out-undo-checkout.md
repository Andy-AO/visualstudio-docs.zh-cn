---
title: 测试区域 3：签出 / 撤销签出 |Microsoft Docs
ms.date: 11/04/2016
ms.topic: conceptual
helpviewer_keywords:
- source control plug-ins, checkout
- source control plug-ins, undo checkout
- source control [Visual Studio SDK], checking out
- source control [Visual Studio SDK], undo checkout
ms.assetid: ce00c5a5-d472-4f45-8776-d77a1fbe9d37
author: madskristensen
ms.author: madsk
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 93ca3f2c656c6bea81139e5e6101499a7fc8febd
ms.sourcegitcommit: 40d612240dc5bea418cd27fdacdf85ea177e2df3
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/29/2019
ms.locfileid: "66331070"
---
# <a name="test-area-3-check-outundo-checkout"></a>测试区域 3：签出/撤销签出
此源代码管理插件的测试区域介绍编辑和正在还原项目，从版本存储区通过**签出**并**撤消签出**命令。

**请查看**:签出，作为版本存储区中的项的标记修改为读/写的本地副本。

**撤消签出**:标记为版本存储区中签入项，将恢复到前 （具体取决于选项） 的签出状态的本地副本。

## <a name="command-menu-access"></a>命令菜单访问

以下[!INCLUDE[vsprvs](../../code-quality/includes/vsprvs_md.md)]测试用例中使用集成的开发环境菜单路径。

##### <a name="check-out"></a>退房：

- **文件**，**源控件**，**签出**。

- **文件**，**签出**。

- 快捷菜单中，**签出**。

- 撤消签出：**文件**，**源控件**，**撤消签出**。

## <a name="common-expected-behavior"></a>常见的预期的行为

- 签出操作之后, 的目标文件和/或文件夹标记为已签出版本存储区中。

- 版本存储区为正确的用户属性签出。

- 签出的日期和时间正确 （每个用户的设置）。

## <a name="test-cases"></a>测试用例

以下是有关撤消签出/签出测试区域的特定测试用例。

### <a name="case-3a-check-out"></a>Case 3a:签出

本部分重点介绍签出命令的操作。

|操作|测试步骤|若要验证的预期的结果|
|------------|----------------|--------------------------------|
|检查出排他 (COE) 客户端项目|1.创建客户端项目。<br />2.将解决方案添加到源代码管理。<br />3.以独占方式签出整个项目 (**文件**，**签出**)。|签出发生。|
|文件系统或本地 IIS Web 项目，请查看排他 (COE)|1.设置文件共享中的 Web 服务器连接**工具**，**选项**，**项目**， **Web 设置**。<br />2.创建 Web 项目。<br />3.将解决方案添加到源代码管理。<br />4.以独占方式签出整个项目 (**文件**，**源代码管理**，**签出**)。|签出发生。|
|签出解决方案 （新方法，用于处理其他文件） 中的解决方案项|1.创建空解决方案。<br />2.将解决方案添加到源代码管理。<br />3.签出解决方案。<br />4.添加多个解决方案项。<br />5.签入所有新添加的项。<br />6.选择多个解决方案项。<br />7.请查看所选项目 (快捷方式菜单中，**签出**)。|签出所选的文件。|
|检查出本地版本 （如果在测试下支持此功能）|1.用户 1:创建客户端项目。<br />2.用户 1:将解决方案添加到源代码管理。<br />3.用户 2:从源代码管理打开的解决方案，到另一个位置。<br />4.用户 2:签出文件。<br />5.用户 2:修改文件。<br />6.用户 2:签入文件。<br />7.用户 1:签出文件的本地版本 (检查**签出本地版本**高级中的选项**签出**对话框)。|文件的本地版本签出。<br /><br /> 由用户 2 的修改不会应用到用户 1 文件。|

### <a name="case-3b-disconnected-check-out"></a>Case 3b:断开连接的签出

在断开连接模式下操作允许用户一定程度的持续的源控件支持时不直接连接至版本存储区。 这是通过本地缓存的已登记的解决方案和项目有关的所有相关信息。

连接到源代码管理存储区时，才会发生独占签出操作。 共享的签出操作出现在任何时间，是否已连接或断开连接。 因此，当从版本存储区仅断开连接**检查出共享**(CO) 启用命令。 断开连接时，**撤消签出**已禁用，因为无法检索旧的版本以替换由用户所做的更改。

当用户重新连接到的版本存储中，签出状态的所有已登记的解决方案和项目进行同步。 此用户执行签出执行必要的更新到存储区。 一旦发生同步，用户便可继续正常工作 （连接）。

#### <a name="expected-behavior"></a>预期的行为

- 不能使用**签出以独占方式**命令，同时与版本存储区断开连接。

- 不能使用**撤消签出**命令，同时与版本存储区断开连接。

- **共享签出**命令的工作原理。

|操作|测试步骤|若要验证的预期的结果|
|------------|----------------|--------------------------------|
|断开连接时，签出文件，然后将用于同步连接|1.断开连接的受控的项目使用更改源代码管理对话框 (**文件**，**源代码管理**，**更改源代码管理**)。<br />2.签出文件。<br />3.签出 （断开连接） 在警告对话框中单击。<br />4.编辑文件。<br />5.使用更改源代码管理对话框中进行连接。<br />6.获取最新版本的已编辑的文件。|常见的预期的行为|

### <a name="case-3c-query-editquery-save-qeqs"></a>案例 3 c:查询编辑/查询保存 (QEQS)
 源代码管理下的项进行跟踪的编辑，更改，并保存，以帮助用户轻松管理他们的文件。 "签入"的受控的项编辑时，QEQS 截获尝试的编辑，并会要求用户是否他想要签出文件以对其进行编辑。 具体取决于**工具**，**选项**设置时，用户是可以强制检查出以编辑该文件或有权编辑内存中的副本，供以后查看。 如果用户的**工具**，**选项**设置未设置显示签出对话框中，只需签出，然后作为用户会使他编辑，该文件会自动签出，只要有可能。

#### <a name="expected-behavior"></a>预期的行为

- 签出操作之后, 的目标文件和/或文件夹标记为已签出版本存储区中。

- 版本存储区为正确的用户属性的签出。

- 签出的日期和时间正确 （每个用户的设置）。

- 目标文件或文件夹的本地副本是可写的。

|操作|测试步骤|若要验证的预期的结果|
|------------|----------------|--------------------------------|
|编辑签入的文本文件|1.创建新项目包含一个文本文件。<br />2.将解决方案添加到源代码管理。<br />3.设置**工具**，**选项**，**源代码管理**，**允许文件时磁盘上以只读方式编辑**为未选中状态。<br />4.设置**工具**，**选项**，**源代码管理**，**提示签出**中**签入文件时，编辑的**组合框。<br />5.设置**工具**，**选项**，**源代码管理**，**提示签出**中**时签入文件将保存**组合框。<br />6.在编辑器中打开文本文件，尝试在文件中键入新文本。 如果此步骤成功，则继续下一步。<br />7.单击**取消**中**签以进行编辑**对话框。 如果此步骤成功，则继续下一步。<br />8。设置**工具**，**选项**，**源代码管理**，**允许文件时磁盘上以只读方式编辑**为选中状态。<br />9.在编辑器中打开项目文件，尝试在文件中键入新文本。 如果此步骤成功，则继续下一步。<br />10.单击**编辑**中**签以进行编辑**对话框。 如果此步骤成功，则继续下一步。<br />11.编辑文本文件并尝试将其保存。|`Result of step 6:`<br /><br /> 请查看编辑对话框将显示。<br /><br /> `Result of step 7:`<br /><br /> 该文件保持不变。<br /><br /> `Result of step 9:`<br /><br /> 请查看编辑对话框将显示。<br /><br /> `Result of step 10:`<br /><br /> 可以编辑内存中的项目文件。<br /><br /> `Result of step 11:`<br /><br /> 在保存、 签出在保存对话框会出现。|
|编辑签入的解决方案文件|重复上一中所述的步骤测试，但更改解决方案属性，而不是修改文本文件时，修改解决方案。|与前面的测试相同|
|编辑签入的项目文件|重复上一中所述的步骤测试，但更改项目属性，而不是修改文本文件时，修改项目。|与前面的测试相同。|

### <a name="case-3d-silent-check-out"></a>本例中 3d:自动签出
 此子区域包括签出方案其中**签出**每个用户的不显示对话框**工具**，**选项**，**源代码管理设置**.

#### <a name="expected-behavior"></a>预期的行为

- 签出操作之后, 的目标文件和/或文件夹标记为已签出版本存储区中。

- 版本存储区为正确的用户属性的签出。

- 签出的日期和时间是正确 （每个用户的设置）。

- 目标文件或文件夹的本地副本是可写的。

|操作|测试步骤|若要验证的预期的结果|
|------------|----------------|--------------------------------|
|无提示签出文件|1.设置**工具**，**选项**，**源代码管理**到**在编辑时自动签出文件**。<br />2.使用文件创建一个新的项目。<br />3.将解决方案添加到源代码管理。<br />4.签出该文件。|文件已签出以无提示方式 (无 UI)。|
|无提示签出项目|1.设置**工具**，**选项**，**源代码管理**到**在编辑时自动签出文件**。<br />2.创建新项目。<br />3.将解决方案添加到源代码管理。<br />4.签出该项目。|文件已签出以无提示方式 (无 UI)。|

### <a name="case-3e-undo-check-out"></a>Case 3e:撤消签出
 **撤消签出**用于取消签出状态的文件，并避免在签入对文件所做的更改。

#### <a name="expected-behavior"></a>预期的行为

- 默认值基于用户的**签出本地版本**设置。 如果用户已选择要签出本地版本，则撤消签出的默认值是始终恢复为签出的版本。

- 在中的图标，撤消接受**解决方案资源管理器**会更新为受影响的文件和项已从**挂起的签入**窗口。

|操作|测试步骤|若要验证的预期的结果|
|------------|----------------|--------------------------------|
|撤消签出的单个文件以独占方式签出|1.创建客户端项目。<br />2.将解决方案添加到源代码管理。<br />3.以独占方式签出文件。<br />4.修改文件。<br />5.撤消签出 (**文件**，**源代码管理**，**撤消签出**)。|常见的预期的行为。|
|撤消签出已签出共享的单个文件|1.创建客户端项目。<br />2.将解决方案添加到源代码管理。<br />3.签出文件共享。<br />4.修改文件。<br />5.撤消签出 (**文件**，**源代码管理**，**撤消签出**)。|常见的预期的行为。|
|将文件添加到项目后撤消签出项目的|1.创建一个新项目并将其添加到源代码管理。<br />2.签出该项目。<br />3.将文件添加到项目。<br />4.撤消签出的项目。|添加的文件已从解决方案资源管理器中的项目。<br /><br /> 不能再签出项目。|
|从项目中删除文件后撤消签出项目的|1.创建一个新项目并将其添加到源代码管理。<br />2.签出该项目。<br />3.从项目中删除一个文件。<br />4.撤消签出的项目。|已删除的文件将显示在解决方案资源管理器中的项目。<br /><br /> 不能再签出项目。|

## <a name="see-also"></a>请参阅
- [源代码管理插件的测试指南](../../extensibility/internals/test-guide-for-source-control-plug-ins.md)
