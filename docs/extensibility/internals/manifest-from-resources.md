---
title: 来自资源的清单 |Microsoft Docs
ms.date: 11/04/2016
ms.topic: conceptual
ms.assetid: 0234109b-5dcb-4d9d-acb9-a63f8bd5699c
author: madskristensen
ms.author: madsk
manager: jillfra
ms.workload:
- vssdk
ms.openlocfilehash: 917397003d0e14bc9b5ff707926adf5f04f73baa
ms.sourcegitcommit: 40d612240dc5bea418cd27fdacdf85ea177e2df3
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/29/2019
ms.locfileid: "66328621"
---
# <a name="manifest-from-resources"></a>Manifest from Resources
从资源工具清单是采用一系列图像资源 （.png 或.xaml 文件），并生成.imagemanifest 文件，以允许与 Visual Studio 映像服务一起使用这些映像的控制台应用程序。 此外，此工具可用于将图像添加到现有.imagemanifest。 此工具可用于添加到 Visual Studio 扩展的映像支持高 DPI 和主题。 生成的.imagemanifest 文件应包含在和部署 Visual Studio 扩展 (.vsix) 的一部分。

## <a name="how-to-use-the-tool"></a>如何使用该工具
 **语法**

 ManifestFromResources /resources:\<Dir1>;\<Img1> /assembly:\<AssemblyName> \<Optional Args>

 **参数**

||||
|-|-|-|
|**交换机名称**|**备注**|**必需或可选**|
|/resources|以分号分隔的映像或目录列表。 此列表应始终包含将在清单中的映像的完整列表。 如果只列出了部分，则不包含的条目都将丢失。<br /><br /> 如果给定的资源文件是一个图像条，该工具会将其拆分到单独的映像添加到清单的每个 subimage 之前。<br /><br /> 如果图像是.png 文件，我们建议此类的名称格式，以便该工具可以填充正确的映像属性中：\<名称 >。\<宽度 >。\<高度 >.png。|必需|
|/assembly|（不包括扩展名） 的托管程序集或本机程序集 （相对于该清单的运行时位置） 资源的宿主的运行时路径的名称。|必需|
|/ 清单|要向生成的.imagemanifest 文件的名称。 这可能包括要在不同的位置创建文件的绝对或相对路径。 该默认名称匹配的程序集名称。<br /><br /> 默认：\<当前目录 >\\< 程序集\>.imagemanifest|Optional|
|/guidName|要为所有生成的清单中的映像在 GUID 符号的名称。<br /><br /> 默认：AssetsGuid|Optional|
|/rootPath|需要在创建托管的资源 Uri 之前剥离根路径。 （此标志。 若要使用该工具在其中获取相对 URI 路径错误，导致无法加载的资源的情况下帮助）<br /><br /> 默认：\<当前目录 >|Optional|
|/recursive|设置此标志指示该工具以递归方式搜索 /resources 参数中的任何目录。 忽略此标志会在顶级的等级等级仅搜索的目录中。|Optional|
|/isNative|当程序集参数是本机程序集的路径时，请设置此标志。 当程序集参数是托管程序集的名称，则忽略此标志。 （请参阅有关此标志的其他信息的备注部分。）|Optional|
|/newGuids|设置此标志指示该工具创建映像的 GUID 符号而不是合并现有清单中的一个新的值。|Optional|
|/newIds|设置此标志指示该工具来创建新的 ID 符号值的每个映像而不是合并现有的清单中的值。|Optional|
|/noLogo|设置此标志会停止打印的产品和版权信息。|Optional|
|/?|打印帮助信息。|Optional|
|/help|打印帮助信息。|Optional|

 **示例**

- ManifestFromResources /resources:D:\Images                       /assembly:My.Assembly.Name                       /isNative

- ManifestFromResources /resources:D:\Images\Image1.png;D:\Images\Image1.xaml                       /assembly:My.Assembly.Name                       /manifest:MyImageManifest.imagemanifest

- ManifestFromResources /resources:D:\Images\Image1.png;D:\Images\Image1.xaml /assembly:My.Assembly.Name /guidName:MyImages /newGuids /newIds

## <a name="notes"></a>说明

- 该工具仅支持.png 和.xaml 文件。 将忽略任何其他图像或文件类型。 分析资源时遇到的所有不受支持类型生成一个警告。 如果不支持该工具完成时找到图像分析的资源，就会生成错误

- 通过遵循的建议的格式为.png 图像，该工具将设置.png 的大小/维度值为格式指定大小，即使它不同于映像的实际大小。

- 宽度/高度格式可以省略对于.png 图像，但该工具将读取图像的实际宽度/高度，并将其用于图像的大小/维度值。

- 多次为同一个.imagemanifest 相同的图像带上运行此工具将会导致重复的清单项，因为该工具会尝试拆分为独立图像的图像条，并将它们添加到现有的清单。

- 工具生成的清单仅应完成合并 （忽略 /newGuids 或 /newIds）。 已自定义或通过其他方式生成的清单可能不正确合并。

- 为本机程序集生成的清单可能需要手动编辑生成以进行匹配的资源 Id 从本机程序集的.rc 文件的 ID 符号之后。

## <a name="sample-output"></a>示例输出
 **简单的映像清单**

 图像清单将类似于此.xml 文件：

```xml
<?xml version="1.0" encoding="utf-8"?>
<!-- This file was generated by the ManifestFromResources tool.-->
<!-- Version: 14.0.15197 -->
<ImageManifest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.microsoft.com/VisualStudio/ImageManifestSchema/2014">
  <Symbols>
    <String Name="Resources" Value="/My.Assembly.Name;Component/Resources/Images" />
    <Guid Name="AssetsGuid" Value="{fb41b7ef-6587-480c-aa27-5b559d42cfc9}" />
    <ID Name="MyImage" Value="0" />
  </Symbols>
  <Images>
    <Image Guid="$(AssetsGuid)" ID="$(MyImage)">
      <Source Uri="$(Resources)/Xaml/MyImage.xaml" />
      <Source Uri="$(Resources)/Png/MyImage.16.16.png">
        <Size Value="16" />
      </Source>
    </Image>
  </Images>
  <ImageLists />
</ImageManifest>
```

 **图像的图像条的清单**

 一个图像条的映像清单将类似于此.xml 文件：

```xml
<?xml version="1.0" encoding="utf-8"?>
<!-- This file was generated by the ManifestFromResources tool.-->
<!-- Version: 14.0.15197 -->
<ImageManifest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.microsoft.com/VisualStudio/ImageManifestSchema/2014">
  <Symbols>
    <String Name="Resources" Value="/My.Assembly.Name;Component/Resources/ImageStrip" />
    <Guid Name="AssetsGuid" Value="{fb41b7ef-6587-480c-aa27-5b559d42cfc9}" />
    <ID Name="MyImageStrip_0" Value="1" />
    <ID Name="MyImageStrip_1" Value="2" />
    <ID Name="MyImageStrip" Value="3" />
  </Symbols>
  <Images>
    <Image Guid="$(AssetsGuid)" ID="$(MyImageStrip_0)">
      <Source Uri="$(Resources)/MyImageStrip_0.png">
        <Size Value="16" />
      </Source>
    </Image>
    <Image Guid="$(AssetsGuid)" ID="$(MyImageStrip_1)">
      <Source Uri="$(Resources)/MyImageStrip_1.png">
        <Size Value="16" />
      </Source>
    </Image>
  </Images>
  <ImageLists>
    <ImageList Guid="$(AssetsGuid)" ID="$(MyImageStrip)">
      <ContainedImage Guid="$(AssetsGuid)" ID="$(MyImageStrip_0)" />
      <ContainedImage Guid="$(AssetsGuid)" ID="$(MyImageStrip_1)" />
    </ImageList>
  </ImageLists>
</ImageManifest>
```

 **本机程序集的图像资源的图像清单**

 本机映像的映像清单将类似于此.xml 文件：

```xml
<?xml version="1.0" encoding="utf-8"?>
<!-- This file was generated by the ManifestFromResources tool.-->
<!-- Version: 14.0.15198 -->
<ImageManifest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.microsoft.com/VisualStudio/ImageManifestSchema/2014">
  <Symbols>
    <String Name="Resources" Value="..\Assembly\Folder\My.Assembly.Name" />
    <Guid Name="AssetsGuid" Value="{442d8739-efde-46a4-8f29-e3a1e5e7f8b4}" />
    <ID Name="MyImage1" Value="0" />
    <ID Name="MyImage2" Value="1" />
  </Symbols>
  <Images>
    <Image Guid="$(AssetsGuid)" ID="$(MyImage1)">
      <Source Uri="$(Resources)">
        <Size Value="16" />
        <NativeResource ID="$(MyImage1)" Type="PNG" />
      </Source>
    </Image>
    <Image Guid="$(AssetsGuid)" ID="$(MyImage2)">
      <Source Uri="$(Resources)">
        <Size Value="16" />
        <NativeResource ID="$(MyImage2)" Type="PNG" />
      </Source>
    </Image>
  </Images>
  <ImageLists />
</ImageManifest>
```