---
title: 为应用&#39;建模建模 |Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-modeling
ms.topic: conceptual
helpviewer_keywords:
- UML, modeling architecture
ms.assetid: aedce746-9df5-49e1-9662-67eb1b83d313
caps.latest.revision: 21
author: jillre
ms.author: jillfra
manager: jillfra
ms.openlocfilehash: 41dbb7b996c32af10010694935cbd3660b462f73
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/19/2019
ms.locfileid: "72609636"
---
# <a name="model-your-app39s-architecture"></a>为应用程序&#39;建模
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

为了帮助确保你的软件系统或应用程序满足用户的需求，你可以在 Visual Studio 中创建模型，作为你的软件系统或应用程序的总体结构和行为说明的一部分。 使用模型，也可以描述在整个设计中使用的模式。 这些模型可你帮助了解现有的体系结构、讨论更改和清楚地传达你的意图。

 若要查看支持此功能的 Visual Studio 的版本，请参阅 [Version support for architecture and modeling tools](../modeling/what-s-new-for-design-in-visual-studio.md#VersionSupport)。

 模型的目的是减少自然语言说明中的歧义，并帮助你和同事对设计进行可视化以及讨论备选设计。 模型应与其他文档或讨论一起使用。 就其本身而言，模型不表示该体系结构的完整规范。

> [!NOTE]
> 在本主题中，“系统”表示你正在开发的软件。 它可能是许多软件和硬件组件的大型集合、或单个应用程序或某个应用程序的一部分。

 系统的体系结构可以分为两个区域：

- [高级别设计](#Structure)。 它描述了主要组件以及这些组件彼此之间如何交互以满足每项需求。 如果系统很大，每个组件可能有其自己的高级设计，该设计演示它是如何由较小的组件组成的。

- 在组件的整个设计中使用的[设计模式](#Patterns)和约定。 一种描述实现编程目标的特定方法的模式。 通过在整个设计中使用相同的模式，你的团队可以减少进行更改和开发新软件的成本。

## <a name="Structure"></a>高级设计
 高级设计描述你的系统的主要组件以及这些组件彼此之间如何交互以实现设计目标。 以下列表中的活动将参与开发高级设计，尽管并不一定按特定顺序参与。

 如果要更新现有代码，可以通过介绍主要组件开始。 请确保你了解对用户需求所做的任何更改，然后添加或修改组件之间的交互。 如果你正在开发新系统，请通过了解用户需求的主要功能开始。 然后可以探索主要用例的交互序列，然后将序列合并到组件设计中。

 在所有情况下，它有助于并行开发不同的活动以及在初期阶段开发代码和测试。 不要试图在开始另一个之前完成这些方面中的一个。 通常情况下，在编写和测试代码时，要求以及你对设计系统的最佳方式的理解都会改变。 因此，你应该通过了解需求的主要功能以及你的设计，然后对此进行编码着手。 在项目的后续迭代中填写详细信息。

- [了解要求](#Requirements)。 任何设计的起始点都是清楚地了解用户的需求。

- [体系结构模式](#BigDecisions)。 所做的有关系统的核心技术和体系结构元素的选择。

- [组件及其接口](#Components)。 可以绘制组件图来显示系统的主要部件，并显示它们彼此进行交互的接口。 每个组件的接口包括在序列图中标识的所有消息。

- [组件之间的交互](#Interactions)。 对于每个用例、事件或传入消息，你可以绘制序列图，此图显示系统的主要组件如何交互以实现需要的响应。

- [组件和接口的数据模型](#Data)。 可以绘制类图来描述组件之间传递的信息和组件内存储的信息。

## <a name="Requirements"></a>了解要求
 开发完整应用程序的高级设计时结合需求模型或用户需求的其他说明最为高效。 有关要求模型的详细信息，请参阅[模型用户需求](../modeling/model-user-requirements.md)。

 如果你正在开发的系统是一个更大系统中的组件，则你的部分或全部需求可能会体现在编程接口中。

 需求模型提供了这些必要的信息：

- 提供的接口。 提供的接口列出了系统或组件必须提供给其用户的服务或操作，无论这些用户是人类用户还是其他软件组件。

- 需要的接口。 需要的接口列出了系统或组件可以使用的服务或操作。 在某些情况下，你将能够将所有这些服务设计为你自己系统的一部分。 在其他情况下，尤其是如果你设计的组件可在许多配置方面与其他组件结合，则需要的接口将根据外部考虑事项设置。

- 服务质量要求。 性能、安全性、稳定性以及系统必须满足的其他目标和约束条件。

  将从系统用户的角度编写需求模型，无论这些用户是人还是其他软件组件。 他们不知道关于你的系统的内部工作原理的任何事情。 与此相反，你在体系结构模型中的目标是描述内部工作原理并演示其如何满足用户的需求。

  将要求和体系结构模型分开是很有用的，因为这样使得与用户讨论要求更容易。 它还帮助你重构设计并考虑备选体系结构，同时保持要求不变。

  有两种可选方法将要求和体系结构模型分隔：

- 将它们放置在同一解决方案但在不同的项目中。 它们将在 UML 模型资源管理器中显示为分隔的模型。 不同的团队成员可以在模型上并行工作。 可以在模型之间创建有限类型的跟踪。

- 将它们放在同一 UML 模型中，但在不同的包中。 这使得跟踪两个模型之间的依赖项更容易，但阻止了多人同时在模型上工作。 此外，非常大的模型会花费更长时间加载进入 Visual Studio。 因此，这种方法不太适用于大型项目。

  应放入要求或体系结构模型中的详细信息的量取决于项目的规模以及团队的大小和分布。 执行短项目的小型团队可能仅需要绘制业务概念和一些设计模式的类图；而跨多个区域分布的大项目会需要明显更多的详细信息。

## <a name="BigDecisions"></a>体系结构模式
 在开发早期，你需要选择设计所依赖的主要技术和元素。 必须在其中作出这些选择的领域包括：

- 基础技术选择，例如在数据库与文件系统之间选择、在联网的应用程序与 Web 客户端之间选择等等。

- 框架选择，例如在 Windows Workflow Foundation 或 ADO.NET 实体框架之间进行选择。

- 集成方法的选择，例如在企业服务总线或点对点通道之间选择。

  这些选择经常由服务质量要求（如规模和灵活性）决定，并且在知道详细的要求之前可做出选择。 在大型系统中，硬件和软件的配置是密切相关的。

  做出的选择会影响你如何使用和解释体系结构模型。 例如，在使用数据库的系统中，类图中的关联可能表示数据库中的关系或外键，然而在基于 XML 文件的系统中，关联可能指示使用 XPath 的交叉引用。 在分布式系统中，序列图中的消息可能表示线路消息；在独立的应用程序中，它们可能表示函数调用。

## <a name="Components"></a>组件及其接口
 本节中的主要建议如下所示：

- 创建组件图以显示系统的主要部件。

- 绘制组件或它们的接口之间的依赖项以显示系统的结构。

- 使用组件上的接口来显示每个组件提供或需要的服务。

- 在大型设计中，你可以绘制单独的关系图以将每个组件分解为更小的部件。

  本节的其余部分将详述这些内容。

### <a name="components"></a>组件数
 体系结构模型的中心视图是显示系统的主要部件和它们彼此之间如何依赖的组件图。 有关组件图的详细信息，请参阅[UML 组件图：参考](../modeling/uml-component-diagrams-reference.md)。

 ![显示部件的 UML 组件图](../modeling/media/uml-barecomponent.png "UML_BareComponent")

 大型系统的典型组件图可能包括类似这样的组件：

- 演示文稿。 给用户提供访问的组件，通常在 Web 浏览器上运行。

- Web 服务组件。 提供客户端和服务器之间的连接。

- 用例控制器。 引导用户完成每个方案的步骤。

- 业务核心。 包含基于需求模型中的类的类、实现关键操作并施加业务约束。

- 数据库。 存储业务对象。

- 对组件进行日志记录和错误处理。

### <a name="dependencies-between-components"></a>组件之间的依赖项
 除了组件本身以外，还可以显示它们之间的依赖项。 两个组件之间的依赖项箭头显示其中一个设计的更改可能会影响另一个的设计。 这通常由于一个组件使用（直接或间接）由另一个组件提供的服务或函数导致。

 结构良好的体系结构具有清楚的依赖项排列，在其中这些条件为 true：

- 在代码图上没有循环。

- 可以将组件排列到层中，其中每个依赖项从一个层中的组件前往下一层中的组件。 任何两个层之间的所有依赖项前进方向相同。

  可以直接显示组件之间的依赖项，或者可以显示附加到组件的需要的和提供的接口之间的依赖项。 通过使用接口，可以定义在每个依赖项中使用哪些操作。 通常情况下，当首次绘制关系图时，将显示组件之间的依赖项，然后当添加详细信息后，它们被接口之间的依赖项替换。 两个版本都是对软件的正确描述，但带接口的版本比早期版本提供了更多详细信息。

  管理依赖项对于可维护软件的生产非常重要。 组件图应反映代码中的所有依赖项。 如果该代码已存在，请确保所有依赖项都显示在图中。 如果代码正在开发，请确保它不包含未在组件图中计划的依赖项。 为了帮助你发现代码中的依赖项，可以生成层关系图。 为了帮助你确保已满足计划的依赖项约束，可以对照层关系图验证代码。 有关详细信息，请参阅[层关系图：参考](../modeling/layer-diagrams-reference.md)。

### <a name="interfaces"></a>接口
 通过将接口放置在组件上，可以分隔和命名由每个组件提供的操作的主要组。 例如，基于 web 的销售系统中的组件可能具有客户通过其购买商品的接口、供应商通过其更新目录的接口和通过其管理系统的第三个接口。

 一个组件可具有任意数量的提供的和需要的接口。 提供的接口显示组件提供给其他组件使用的服务。 需要的接口显示组件使用的其他组件中的服务。

 如果同时定义提供的和需要的接口，这可帮助你将该组件与设计的其余部分完全分开，因此你可以使用这些技术：

- 将组件放入测试工具中，利用此测试工具在其中模拟周围的组件。

- 开发独立于其他组件的组件。

- 通过将组件的接口耦合到不同的组件在其他上下文中重用该组件。

  当你想要定义接口中的操作列表时，可以在 UML 类图上创建接口的另一个视图。 若要执行此操作，在 UML 模型资源管理器中找到该接口，并将其拖动到类图上。 然后可以将操作添加到接口。

  UML 接口中的操作可以表示任何可调用组件行为的方式。 它可能表示 Web 服务请求、信号或某种其他类型的交互、或普通的程序函数调用。

  若要确定要添加的操作，请创建序列图以显示组件如何与另一个组件交互。 请参阅[组件之间的交互](#Interactions)。 每个序列图显示了发生在不同用例中的交互。 用这种方式，当你浏览用例时，可以逐渐向每个组件的接口中的操作列表添加。

### <a name="decomposing-a-component-into-parts"></a>将一个组件分解为部件
 可以将前面章节中描述的过程应用于每个组件。

 在每个组件中，可以显示作为部件的子组件。 实际上，Part 是其父组件的属性，这是类的一种类型。 每个部件都有其自己的类型，该类型可能是组件。 可以将此组件放置在关系图上，并显示其部件。 有关详细信息，请参阅[UML 组件图：准则](../modeling/uml-component-diagrams-guidelines.md)。

 将此技术应用于整个系统是很有用的。 将它绘制为单个组件，并将其主要组件作为部件显示。 这有助于你明确标识系统与外部世界的接口。

 当对一个组件的设计使用另一个组件时，你经常要做一个选择：是将它作为部件表示还是作为你通过“需要的接口”访问的单独的组件表示。

 在以下情况中，请使用部件：

- 父组件的设计必须始终使用部件的组件类型。 因此，部件的设计是父组件的设计的必要组成部分。

- 父组件没有其自身的具体存在。 例如，可能有一个称做表示层的概念组件，它表示处理视图和用户交互的实际组件的集合。

  在这些情况中，请使用通过需要的接口访问的单独组件：

- 需要的组件在运行时可通过其接口与不同的提供组件耦合。

- 设计是这样，可以容易地用另一个提供程序替换一个提供程序。

  使用需要的接口通常比使用部件更可取。 虽然设计可能会花费更长时间，但生成的系统会更加灵活。 单独测试组件也更容易。 这样就允许在开发计划中有更少耦合。

## <a name="Interactions"></a>组件之间的交互
 本节中的主要建议如下所示：

- 确定系统的用例。

- 对于每个用例，绘制一个或多个关系图，以显示系统的组件如何通过与另一个组件以及用户合作实现所需的结果。 通常情况下，这些是序列图或活动图。

- 使用接口来指定每个组件收到的消息。

- 描述“接口”中“操作”的效果。

- 重复每个组件的过程，显示其部件的交互方式。

  例如，在基于 web 的销售系统中，需求模型可能将客户采购定义为用例。 你可以创建一个序列图来显示客户与表示层中的组件的交互并显示它们与数据仓库和记帐组件的交互。

### <a name="identifying-the-initiating-events"></a>标识初始事件
 由大多数软件系统完成的工作为不同的输入或事件提供的响应可以方便地划分这些工作。 初始事件可能是以下事件之一：

- 用例中的第一个操作。 它可能在需求模型中显示为用例中的一个步骤或活动图中的一个操作。 有关详细信息，请查看[UML 用例图：准则](../modeling/uml-use-case-diagrams-guidelines.md)和[uml 活动图：准则](../modeling/uml-activity-diagrams-guidelines.md)。

- 编程接口中的一条消息。 如果正在开发的系统是更大系统中的一个组件，它应被描述为其中一个组件接口中的操作。 请参阅[组件及其接口](#Components)。

- 由你的系统监视的某个特定条件，或一个常规事件(比如一天的时间)。

### <a name="describe-the-computations"></a>描述计算
 绘制序列图以显示组件如何响应初始事件。

 为每个参与典型序列的组件实例绘制生命线。 在某些情况下，每种类型可能有不止一个实例。 如果已将整个系统描述为单个组件，则它所包含的每个部件应有一个生命线。

 有关详细信息，请参阅[UML 序列图：准则](../modeling/uml-sequence-diagrams-guidelines.md)。

 活动图在某些情况下也是有用的。 例如，如果你的组件具有连续的数据流，则可将其描述为对象流。 如果你的组件具有复杂的算法，可将它描述为控制流。 请确保你清楚表明哪个组件执行每个操作，例如通过使用注释。 有关详细信息，请参阅[UML 活动图：准则](../modeling/uml-activity-diagrams-guidelines.md)。

### <a name="specify-the-operations"></a>指定操作
 关系图显示了每个组件执行的操作，表示为序列图上的消息或活动图中的操作。

 将每个组件的这些操作收集在一起。 在组件上创建提供的接口，并向接口添加操作。 通常情况下，单独的接口用于每种类型的客户端。 可在**UML 模型资源管理器**中将操作轻松添加到接口。 以相同的方式，从其他组件收集每个组件使用的操作并将其放置在附加到组件的“需要的接口”中。

 向活动图或序列图添加注释有助于注意每次操作后实现了什么。 你还可以在其**本地后置条件**属性中编写每个操作的效果。

### <a name="Data"></a>组件和接口的数据模型
 定义组件接口中的每个操作的参数和返回值。 如果操作表示调用（如 Web 服务请求），则参数是那些作为请求的一部分发送的信息。 如果从某一操作返回多个值，则可以使用 "**方向**" 属性设置为 " **Out**" 的参数。

 每个参数和返回值都具有类型。 可以使用 UML 类图来定义这些类型。 不需要表示这些关系图中的实现详细信息。 例如，如果你要描述以 XML 形式传输的数据，可以使用关联来表示 XML 节点之间任何类型的的交叉引用并使用类来表示节点。

 使用注释来描述关联和特性的业务约束。 例如，如果客户的订单中的所有项目都必须都来自同一个供应商，则可以通过对订单项和产品目录中的项之间以及目录项及其供应商之间的关联的引用来描述。

## <a name="Patterns"></a>设计模式
 设计模式是如何设计软件的某个特定方面的大纲，尤其是在系统的不同部件中重复出现的那个方面。 通过在项目之间采用一种统一的方法，可以降低设计成本、确保用户界面中的一致性，并降低理解和更改代码的成本。

 一些常规设计模式（例如“观察者”）是众所周知且广泛适用的。 此外，还有仅适用于你的项目的模式。 例如，在 Web 销售系统中，代码中将有多个操作用于对客户的订单进行更改。 若要确保订单的状态在每个阶段都准确显示，则所有这些操作都必须遵循特定的协议来更新数据库。

 软件体系结构工作的一部分是确定整个设计应采用的模式。 这通常是正在执行的任务，因为随着项目的进展，将发现新模式和对现有模式的改进。 组织开发计划是很有用的，这样你就可以在早期阶段中使用每个主要设计模式。

 大多数设计模式可以在一定程度上体现在框架代码中。 模式的一部分可被降低至要求开发人员使用特定的类或组件，如可确保正确处理数据库的数据库访问层。

 设计模式在文档中说明，并且通常包含以下几部分：

- 名称。

- 它所适用的上下文的说明。 何种标准应使开发人员考虑应用这种模式？

- 它所解决的问题的简要说明。

- 主要部件的模型及其关系。 这些可能是类或组件和接口，它们之间存在关联和依赖项。 元素通常分为两个类别：

  - 开发人员必须在使用该模式的代码的每个部分中复制的元素。 可使用模板类型来说明这些内容。 有关详细信息，请参阅[UML 用例图：参考](../modeling/uml-use-case-diagrams-reference.md)。

  - 说明开发人员应使用的框架类的元素。

- 部件之间的交互模型，使用序列图或活动图。

- 命名约定。

- 该模式如何解决问题的说明。

- 开发人员可能能够采用的变体的说明。

## <a name="see-also"></a>请参阅
 [编辑 UML 模型和关系图](../modeling/edit-uml-models-and-diagrams.md)[可视化代码](../modeling/visualize-code.md)[模型用户需求](../modeling/model-user-requirements.md)[从模型开发测试](../modeling/develop-tests-from-a-model.md)[使用开发过程中的模型](../modeling/use-models-in-your-development-process.md)
