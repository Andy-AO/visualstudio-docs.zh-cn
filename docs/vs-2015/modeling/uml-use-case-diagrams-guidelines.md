---
title: UML 用例图：准则 |Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-modeling
ms.topic: conceptual
helpviewer_keywords:
- diagrams - modeling, use case
- UML, use case diagrams
- diagrams - modeling, UML use case
- use case diagrams
- UML diagrams, use case
ms.assetid: b1ae8ed0-d00b-4f9b-8e23-733e09e81e9b
caps.latest.revision: 38
author: jillre
ms.author: jillfra
manager: jillfra
ms.openlocfilehash: 2d3434236908771cbc2149e766b841e7bcf4cb4e
ms.sourcegitcommit: a8e8f4bd5d508da34bbe9f2d4d9fa94da0539de0
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/19/2019
ms.locfileid: "72667847"
---
# <a name="uml-use-case-diagrams-guidelines"></a>UML 用例图：准则
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

在 Visual Studio 中，您可以绘制*用例图*来汇总使用您的应用程序或系统的用户以及他们可以对其执行的操作。 若要创建 UML 用例图，请在 "**体系结构**" 菜单上单击 "**新建 UML 或层关系图**"。

 有关视频演示，请参阅[将功能组织到用例](http://channel9.msdn.com/posts/clinted/UML-with-VS-2010-Part-2-Organizing-Features-Into-Use-Cases/)。

 若要查看支持此功能的 Visual Studio 的版本，请参阅 [Version support for architecture and modeling tools](../modeling/what-s-new-for-design-in-visual-studio.md#VersionSupport)。

 用例图有助于讨论和传达以下内容：

- 你的系统或应用程序与人、组织或外部系统进行交互的几种方案。

- 它帮助参与者实现的目标。

- 系统的范围。

  用例图不显示用例的详细信息：它只汇总用例、参与者和系统之间的某些关系。 特别是，用例图不显示每个用例为实现目标所执行步骤的顺序。 可以在其他关系图和文档中描述这些详细信息，这些关系图和文档可与各用例相链接。 有关详细信息，请参阅本主题[中的详细描述用例](#Details)。

  为用例提供的描述将使用与系统所用于的领域相关的一些词汇，如“销售”、“菜单”和“顾客”等。 明确定义这些词汇及其关系是非常重要的，你可以借助 UML 类图来进行定义。 有关详细信息，请参阅[UML 类图：准则](../modeling/uml-class-diagrams-guidelines.md)。

  用例只处理系统的功能要求。 诸如业务规则、服务质量要求和实现约束等其他要求必须另外表示。 体系结构和内部详细信息也必须另外说明。 有关如何定义用户需求的详细信息，请参阅[模型用户需求](../modeling/model-user-requirements.md)。

  本主题中使用的示例与顾客可在其上从本地餐馆订餐的网站有关。

  ![用例图中的元素](../modeling/media/uml-ucovactor.png "UML_UCOvActor")

- *参与者*（1）是与系统交互的一类人员、组织、设备或外部软件组件。 示例参与者是**客户**、**餐馆**、**温度传感器**、**信用卡授权者。**

- *用例*（2）表示一个或多个参与者在实现特定目标时执行的操作。 示例用例为 "**订餐**"、"**更新" 菜单**、"**处理付款**"。

   在用例图中，用例与执行它们的参与者相关联 (3)。

- 你的*系统（4）* 是你要开发的任何内容。 系统可以是小型软件组件，其中的参与者只是其他软件组件；系统也可以是完整的应用程序；系统还可以是部署在多台计算机和设备上的大型分布式应用程序套件。 例如，"**订餐" 网站**、"**餐饮交付业务**"、"**网站版本 2**"。

   用例图可以显示系统或其子系统支持的用例。

## <a name="BasicSteps"></a>绘制用例图的基本步骤

> [!NOTE]
> [编辑 UML 模型和关系图](../modeling/edit-uml-models-and-diagrams.md)中介绍了用于创建任何建模图的详细步骤。

#### <a name="to-create-a-new-use-case-diagram"></a>创建新的用例图

1. 在 "**体系结构**" 菜单上，单击 "**新建 UML 或层关系图**"。

2. 在 "**模板**" 下，单击 " **UMLUse 例图**"。

3. 命名该关系图。

4. 在 "**添加到建模项目**" 中，选择解决方案中的现有建模项目，或者**创建一个新的建模项目**，然后单击 **"确定"** 。

#### <a name="to-draw-a-use-case-diagram"></a>绘制用例图

1. 将工具箱中的**子系统**边界拖到关系图上，以表示整个系统或其主要组件。

    - 如果不希望描述系统或其组件支持哪些用例，用例图中可以不绘制系统边界。

    - 根据需要，拖动系统的四角将其扩大。

    - 对其适当地重命名。

2. 将**参与者**从工具箱拖动到关系图上（将其置于任何系统边界之外）。

    - 参与者表示与你的系统进行交互的各类用户、组织和外部系统。

    - 重命名这些参与者。 例如：**客户、餐馆、信用卡机构。**

3. 将**用例**从工具箱拖到适当的系统上。

    - 用例表示参与者借助你的系统所执行的活动。

    - 使用参与者自身能够理解的名称重命名这些用例。 不要使用与代码有关的名称。 例如： **"订餐"、"订餐"、"送餐"** 。

    - 从 "**订餐**" 之类的主要事务开始，一直离开到更小的交互，如 "**选择菜单项**"。

    - 将每个用例放入支持它的系统或主要子系统（忽略任何只与用户有关的外观或组件）。

    - 可以在系统边界外绘制用例，以表明系统（可能在特定版本中）不支持该用例。

4. 单击工具箱上的 "**关联**"，然后单击用例，然后选择参与用例的参与者。 以此方式将每个参与者与其用例相链接。

5. 使用**包含**、**扩展**和**归纳**关系构建用例。 若要创建其中的每个链接，请依次单击工具、源用例和目标。 请参阅下面的 "[构造用例](#Structuring)" 一节。

6. 详细描述用例。 请参阅以下部分，其中标题[详细描述了用例](#Details)。

7. 绘制其他关系图，使其分别针对不同子系统或不同相关用例组。 一个建模项目中的所有关系图是同一模型的多种视图。

## <a name="Actors"></a>绘制参与者和用例
 用例图的主要用途是显示与系统交互的用户以及这些用户借助系统实现的主要目标。

- 创建**参与者**，用于表示与系统或子系统交互的人员、组织、其他系统、软件或设备的类。

  - 若要了解如何绘制参与者和其他元素，请参阅[编辑 UML 模型和关系图](../modeling/edit-uml-models-and-diagrams.md)。

  - 对于每一组不同的目标，按其类型或角色标识参与者，即使具体的个人或实体可能是相同的。 例如，“餐馆”和“顾客”是不同的参与者，即使餐馆的雇员可能有时候也是顾客。

- 为每个参与者设法实现给系统的每个目标创建**用例**。

  - 以参与者能够理解的词语命名并描述用例，而不应使用实现术语。

- 使用 "**关联**" 将参与者链接到用例。

### <a name="inheritance-between-actors"></a>参与者之间的继承
 ![显示继承的用例图](../modeling/media/uml-ucguideinherit.png "UML_UCGuideInherit")

 可以在参与者之间绘制**泛化**链接。 专用参与者（如示例中的“俱乐部顾客”）继承泛化参与者（如“顾客”）的用例。 箭头应指向更通用的参与者，如“顾客”。 创建链接时，首先指向更专用的参与者。

 专用参与者可以有自己的额外用例，这些用例对于其他参与者是不可用的。

> [!CAUTION]
> 不应造成会导致参与者泛化自身的泛化关系循环。 循环可能会产生错误。

### <a name="alternative-actor-icons"></a>可选参与者图标
 可以使用自定义图标而不是标准线条图来表示参与者。 例如，可以将其更改为类似于设备、餐馆和银行等的图标。

##### <a name="to-change-the-appearance-of-an-actor"></a>更改参与者的外观

1. 右键单击该执行组件，然后单击 "**属性**"。

     此时会显示“属性”窗口。

2. 将 "**图像路径**" 属性设置为图像文件的位置。

    - 可以使用多种图像格式的任何一种，包括 .gif、.jpg 和 .bmp。

    - 使用包含在解决方案或项目源控件中的文件，以便它在移动或复制解决方案时仍可用。

3. 若要将此外观复制到其他用例图中，请复制该参与者并将其粘贴到其他关系图中。

    - 图像的更改仅应用于特定关系图中的视图。 而不会应用于基础模型元素。 如果将参与者从 UML 模型资源管理器拖动到另一个关系图中，该参与者将以标准线条图显示。

### <a name="multiplicities-between-actors-and-use-cases"></a>参与者与用例之间的重数
 参与者与用例之间的关联可在每一端显示重*数*。

 ![将 case 用于参与者](../modeling/media/uml-ucguidemulti1.png "UML_UCGuideMulti1")

> [!NOTE]
> 如果用例图上关联的重数都为**1**，则隐藏该重数。

 默认情况下，每个多重性为**1**。 在模型的严格释义中，以顾客订餐为例，重数为 1 表示一餐只有一名顾客预订并且每名顾客一次只订一餐。

 你可以更改这些重数。

 例如:

 ![显示多对多多重性的用例](../modeling/media/uml-ucguidemulti2.png "UML_UCGuideMulti2")

- 若要声明同一类的多个执行组件可以在用例中出现一次，请将关联的执行组件端的重数设置为**1 .. \*** 。

   在图示中，一个或多个餐馆可参与实现同一订餐。

- 若要显示每个参与者可同时参与几次用例，请将关联的用例端的重数设置为 **\*** 。

   在图示中，每个餐馆可同时实现多个订餐。

##### <a name="to-set-multiplicities-on-an-association"></a>设置关联的重数

1. 右键单击关联，然后单击 "**属性**"。

2. 展开 "**第一个角色**" 或 "**第二个**角色"。

    *Role*表示该关联一端的元素。

3. 设置 Multiplicity 属性，可从下表中选择：

   - **1**表示此角色的一个实例正好参与每个链接。

   - **1. \*** ，表明此角色的一个或多个实例参与每个链接。

   - **0-1** ，表明参与是可选的。

   - **\*** ，表明此角色的零个或多个实例参与链接。

> [!NOTE]
> 很多团队不在用例图中提供重数信息，保留重数的默认值 1， 而是在用例的其他描述中提供该信息。 在这种情况下，用例图中的所有重数都将隐藏。

### <a name="using-an-actor-or-use-case-on-multiple-diagrams"></a>在多个关系图中使用一个参与者或用例
 可以在多个关系图中显示相同的参与者和用例。 例如:

- 可以在不同关系图中描述同一参与者涉及的不同用例。

- 可以使用一个关系图来显示一个用例所关联的多个参与者和子系统，使用另一个关系图来显示如何将该用例结构化到被包括用例和扩展用例中。

##### <a name="to-show-the-same-actor-or-use-case-on-different-diagrams"></a>在不同关系图中显示相同参与者或用例

1. 在一个关系图中创建参与者或用例。

2. 创建另一个用例图。

3. 将执行组件或用例从**模型资源管理器**拖到新关系图上。

    > [!NOTE]
    > 如果放入新关系图的是已关联的参与者和用例，则它们之间的关联将自动显示在新关系图中。

## <a name="Details"></a>详细描述用例
 用例表示：

- 使用系统的参与者的目标，例如**购买食物**;与

- 一个或多个*方案*，即，为实现目标而执行的一系列步骤，如： {**订餐，付费，交付**}。 除了成功情况外，还可能出现一些例外情况或失败方案，如**信用卡被拒绝**。

  对用例的描述可以有不同的详细程度。 在设计的早期阶段，仅在用例图上标示名称就足够了。  之后，可以编写更详细的方案描述。

  在 Visual Studio Ultimate 中，可以采用多种方法描述用例，这些方法可以分开使用，也可以一起使用：

- 将用例链接到项目中的另一个或多个关系图。

  - 活动图有助于解释包含循环、分支和并行线程的较复杂流程。 它还可以显示流程各部分之间的数据流。 有关详细信息，请参阅[UML 活动图：准则](../modeling/uml-activity-diagrams-guidelines.md)。

  - 序列图有助于解释不同参与者之间复杂的交互序列。 它还可用于显示系统内发生的对每个用例的响应。 有关详细信息，请参阅[UML 序列图：准则](../modeling/uml-sequence-diagrams-guidelines.md)。

- 将用例链接到用于详细描述用例的 OneNote 页面、节或段落。

- 将用例链接到 Word 文档，在该文档中使用文本和屏幕截图等来描述该用例的方案。 有关详细信息，请参阅[模型用户需求](../modeling/model-user-requirements.md)。

#### <a name="to-link-a-use-case-to-a-diagram-or-file-in-the-same-solution"></a>若要将用例链接到同一解决方案中的关系图或文件

1. 绘制关系图（如序列图或活动图）来演示用例的方案。

2. 返回到用例图。

3. 将关系图或文件从解决方案资源管理器拖动到用例图的空白部分。

4. 使用**依赖关系**从项目连接到用例。

#### <a name="to-link-to-a-solution-file-such-as-a-word-document-or-powerpoint-presentation"></a>若要链接到诸如 Word 文档或 PowerPoint 演示文稿等解决方案文件

1. 编写一个文档，在该文档中使用文本、屏幕截图等来描述用例的方案。

2. 向解决方案中添加文档。

    1. 将该 Word 文档移入解决方案所在的 Windows 文件夹。

    2. 在解决方案资源管理器中，右键单击解决方案，指向 "**添加**"，然后单击 "**现有项**"。

    3. 导航到 Word 文档，然后单击 "**添加**"。

         该 Word 文档将显示在解决方案资源管理器的解决方案文件夹中。

3. 将 Word 文档从解决方案资源管理器拖动到用例图的空白部分。

     随即显示新项目。

4. 使用**依赖关系**从项目连接到用例。

#### <a name="to-link-to-a-shared-document-onenote-element-or-web-page"></a>若要链接到共享文档、OneNote 元素或网页

1. 获取的共享元素的 URL。 例如，这可以是网络文件路径的开头为 "\\ \\"、网页或 Sharepoint URL （以 "http://" 开头），也可以是指向 OneNote 分区、页面或段落开始 "onenote：" 的链接。

2. 在 "工具箱" 中，单击 "**项目**"，然后在用例图中单击。

3. 选择新的项目后，将 URL 键入或粘贴到**Hyperlink**属性中。

> [!NOTE]
> 双击项目可打开与其链接的关系图或文档。

### <a name="linking-use-cases-to-work-items"></a>将用例链接到工作项
 如果你的项目使用 [!INCLUDE[vstsTfsRosarioLong](../includes/vststfsrosariolong-md.md)] 并且你已 [!INCLUDE[esprtfc](../includes/esprtfc-md.md)]，则可以将每个用例链接到 [!INCLUDE[esprfound](../includes/esprfound-md.md)] 中的工作项。 若要了解如何创建这些链接，请参阅[链接模型元素和工作项](../modeling/link-model-elements-and-work-items.md)。

 这使你能够：

- 在链接的工作项中描述用例。 特别是，如果你的项目使用 Visual Studio 正式过程模板，则可以链接到用例工作项。 此工作项类型提供对用例的目标和方案进行描述的字段。

- 将测试用例链接到用例，以便可以获取实现用例的代码开发进度的报告。

- 将任务链接到用例，以便可以跟踪开发工作的进度。

## <a name="Structuring"></a>结构化用例
 应设法只用几个主要用例来描述系统的行为。 每个大型用例定义某个参与者实现的主要目标，如购买产品，如果是从供应商的角度出发，则为提供用于销售的产品。

 明确这些目标之后，可以细化如何实现每个目标以及基本目标的变体。

 避免将用例分解得过细。 用例应基于用户对系统的体验，而不是系统内部的处理。 此外，你通常会发现，创建代码的早期工作版本比花费时间对用例进行精细的结构化更高效。

 可以在用例图中汇总主要用例和细化用例之间的关系。 以下各节对此进行介绍：

- [用 Include 显示用例的详细信息](#Include)

- [用通用化共享目标](#Inheritance)

- [通过扩展分离变体事例](#Extend)

### <a name="Include"></a>用 Include 显示用例的详细信息
 使用 "**包括**" 关系可显示一个用例描述另一个用例的一些详细信息。 在图例中，**定购订餐**包括 "**付款**"、"**选择菜单**"，然后**选择 "菜单项**"。 每个被包括的细化用例是一个或多个参与者为了实现包括用例的整体目标可能必须执行的一个步骤。 箭头应指向细化的被包括用例。

> [!CAUTION]
> 不应造成会导致用例包括自身的包括关系循环。 循环可能会产生错误。

 可以共享被包括用例。 在此示例中，"**订餐**" 和 "**订阅审阅**" 用例都包括 "**付款**"。

 ![使用 include 分解的用例](../modeling/media/uml-ucguideinclude.png "UML_UCGuideInclude")

 被包括用例的目标和方案应具有独立意义，以便可以包括在以后设计的用例中。

 将用例分为包括部分和被包括部分对于实现以下目标很有用：

- 将用例描述结构化为不同的详细层次。

- 避免在不同用例中重复共享方案。

#### <a name="Steps"></a>定义详细步骤的顺序
 用例图不提供执行细化步骤必须遵循的顺序，也不告知其中的每一步骤是否始终是必需的。

 若要清除步骤的顺序，可以使用**项目**将单独的文档附加到包括用例。 在下面的示例中，一个活动图附加到“订餐”用例。 或者，可以使用包含步骤列表或一系列屏幕截图的文本文档。 有关详细信息，请参阅[详细描述用例](#Details)。

 使用活动图时请注意下面的命名约定：

- 整个活动的名称与包括用例的名称相同。

- 活动图中的操作与被包括用例有相同的名称。

  有关详细信息，请参阅[UML 活动图：准则](../modeling/uml-activity-diagrams-guidelines.md)。

  ![链接活动图中显示的用例步骤](../modeling/media/uml-ucguidesteps.png "UML_UCGuideSteps")

### <a name="Inheritance"></a>用通用化共享目标
 使用泛化关系来表明，*专用*用例是实现另一个*通用*用例所表达目标的一种特殊方法。 开放箭头应指向更通用的用例。

 ![显示通用化关系的用例](../modeling/media/uml-ucguidegeneral.png "UML_UCGuideGeneral")

 例如，**按信用卡** **支付通用化**付款并**按现金**付款。

> [!CAUTION]
> 不应造成会导致参与者泛化自身的泛化关系循环。 循环可能会产生错误。

 专用用例有助于展示系统实现相同目标的不同方法。

 专用用例视为继承了通用用例的目标和参与者。 通用用例可以没有自己的方案；其专用化描述实现目标的不同方法。

##### <a name="to-refactor-common-goals-from-two-or-more-use-cases"></a>通过两个或更多用例重构共同目标

1. 创建新的通用用例，并为其命名。

2. 使用指向新的通用用例的大箭头创建**归纳**关系。

    1. 单击工具箱中的 "**泛化**"。

    2. 单击专用用例（示例中的 "**信用卡付款**"）。

    3. 单击一般用例（示例中为 "**付款**"）。

3. 如果已描述专用用例的目标，则可将共同部分移入通用用例的描述。

4. 可将在专用用例之间共享的参与者移到通用用例。

### <a name="Extend"></a>用扩展分隔变体事例
 “扩展”链接用于表明一个用例可以在特定情况下向另一个用例添加功能。 箭头应指向被扩展的主用例。

 ![一个用例扩展另一个用例](../modeling/media/uml-ucguideextend.png "UML_UCGuideExtend")

> [!CAUTION]
> 不应造成会导致参与者泛化自身的扩展关系循环。 循环可能会产生错误。

 例如，典型网站的**登录**用例可能包括**注册新用户**-但仅当用户还没有帐户时。

##### <a name="to-separate-a-use-case-into-main-and-extending-parts"></a>将用例分为主要部分和扩展部分

1. 创建新的扩展用例，并为其命名。

2. 使用指向扩展用例的箭头创建**扩展**关系。

   1. 单击工具箱中的 "**扩展**"。

   2. 单击 "扩展" 用例（示例中的 "**注册新用户**"）。

   3. 单击扩展用例（示例中的**登录名**）。

       > [!NOTE]
       > 避免在关系图中创建扩展关系的循环。 用例不能成为自身的扩展。

3. 如果已创建被扩展用例的方案，可将相关步骤移入扩展方案。

4. 扩展的说明（示例中的 "**注册新用户**"）应包括在主用例方案中发生的位置的详细信息，以及在什么情况下。 将其视为修改主用例的描述。

   扩展用例表示本应属于主用例方案一部分的方案步骤。 扩展的方案和目标将始终在主用例的上下文中读取，因此它们不需要单独有用。

   描述以下情况时，分离扩展很有用：

- 存在仅参与扩展用例的额外参与者。 例如，需要管理员来批准顾客在网站上的注册。

- 单独的子系统将处理扩展用例。

- 此扩展将只在系统的特定版本中可用。 可以在用例图中将每个版本显示为一个单独的子系统。

## <a name="Subsystems"></a>使用子系统边界
 子系统边界用于表明哪些用例在系统的范围内。

#### <a name="to-draw-a-subsystem-boundary"></a>绘制子系统边界

1. 在 "工具箱" 中，单击 "**子系统**"，然后单击关系图。

    子系统将显示在关系图中。

2. 拖动子系统的四角以调整其大小。

3. 将现有用例拖入或拖出子系统以调整该子系统内容。

   \- 或 -

   若要直接在子系统中创建新用例，请在 "工具箱" 中单击 "**用例**"，然后在子系统内部单击。

> [!NOTE]
> 用例的 "**主题**" 属性指示它包含的子系统。

### <a name="use-cases-outside-the-system-scope"></a>系统范围外的用例
 将属于业务组成部分但不由你开发的系统来处理的用例包括在关系图中通常是很有用的。 这有助于开发人员了解其工作背景。 例如，“送餐”可以显示为涉及参与者“餐馆”和“顾客”的用例，但在“订餐网站”的职责范围外。

### <a name="multiple-subsystems"></a>多个子系统
 可以创建多个子系统边界，以表明不同用例是如何由不同的系统组件来处理的。 例如，可以在单独的论坛网站上处理**添加餐馆评价**。 请记住，用例图应处理用户可见的内容。 如果要描述系统内部的工作划分，应考虑使用组件图。

### <a name="system-versions"></a>系统版本
 可以使用不同的子系统边界来演示系统的不同版本。 例如，“付款”用例可能包括在“网站版本 2”中，但不在“版本 1”中。这表示系统可帮助顾客订餐。 但是，顾客必须直接付款给餐馆。

 使用**依赖**关系关系链接表示不同版本或变体的子系统。

 ![子系统显示系统的不同版本](../modeling/media/uml-ucguidesystem.png "UML_UCGuideSystem")

## <a name="see-also"></a>请参阅
 [模型用户需求](../modeling/model-user-requirements.md) [UML 序列图：准则](../modeling/uml-sequence-diagrams-guidelines.md)[编辑 uml 模型和关系图](../modeling/edit-uml-models-and-diagrams.md) [UML 用例图：引用](../modeling/uml-use-case-diagrams-reference.md) [uml 类图](../modeling/uml-class-diagrams-reference.md)：引用 uml[组件图：](../modeling/uml-component-diagrams-reference.md)引用[uml活动图：准则](../modeling/uml-activity-diagrams-guidelines.md)[视频：将功能组织到用例](http://channel9.msdn.com/posts/clinted/UML-with-VS-2010-Part-2-Organizing-Features-Into-Use-Cases/)
