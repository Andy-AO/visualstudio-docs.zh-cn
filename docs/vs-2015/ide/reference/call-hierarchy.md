---
title: 调用层次结构 | Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-general
ms.topic: reference
f1_keywords:
- VS.CallHierarchy
helpviewer_keywords:
- Call Hierarchy
ms.assetid: c55bda01-d7de-4823-8f9a-1bcc37dbb74a
caps.latest.revision: 45
author: gewarren
ms.author: gewarren
manager: jillfra
ms.openlocfilehash: 41c7aa12e4adf2a757689670cdfed394f2a534c6
ms.sourcegitcommit: 47eeeeadd84c879636e9d48747b615de69384356
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/23/2019
ms.locfileid: "63433700"
---
# <a name="call-hierarchy"></a>调用层次结构
[!INCLUDE[vs2017banner](../../includes/vs2017banner.md)]

调用层次结构通过显示选定方法、属性或构造函数的所有调用方及被调用方，使用户可以在代码间导航。 这有助于更好地理解代码的流动方式，以及评估代码更改的效果。 可以检查多个级别的代码，以查看方法调用的复杂链条以及代码的其他入口点，从而找到所有可能的执行路径。  
  
 与调试器显示的调用堆栈不同，调用层次结构可在设计时使用。  
  
## <a name="using-call-hierarchy"></a>使用调用层次结构  
 若要显示“调用层次结构”窗口，请右键单击某个方法、属性或构造函数调用的名称，然后单击“查看调用层次结构”。  
  
 成员名称会显示在“调用层次结构”窗口的树状视图窗格中。 如果展开成员节点，则会显示“调用方”_成员名称_和“被调用方”_成员名称_子节点。 下图显示了“调用层次结构”窗口中的这些节点。  
  
 ![打开一个节点的调用层次结构](../../ide/reference/media/onenode.png "OneNode")  
“调用层次结构”窗口  
  
- 如果展开“调用方”节点，则显示调用选定成员的所有成员。  
  
- 如果展开“被调用方”节点，则显示选定成员调用的所有成员。  
  
  随后可将其中每个子节点成员展开成“调用方”和“被调用方”节点。 这样就可以在调用方的堆栈中导航，如下图所示。  
  
  ![打开多个节点的调用层次结构](../../ide/media/multiplenodes.png "MultipleNodes")  
  “调用层次结构”窗口  
  
  对于定义为虚拟或抽象成员的成员，会显示一个“重写方法名”节点。 针对接口成员，显示的是“实现方法名”节点。 这些可展开的节点与“调用方”和“被调用方”节点显示在同一级。  
  
  工具栏上的“搜索范围”框包含“我的解决方案”、“当前项目”和“当前文档”选项。  
  
  在“调用层次结构”树状视图窗格中选择某个子成员时：  
  
- “调用层次结构”详细信息窗格会显示在其中从父成员调用子成员的所有代码行。  
  
- “代码定义”窗口（如果打开）显示选定成员的代码。 C# 和 C++ 提供此窗口。 有关此窗口的详细信息，请参阅[查看代码的结构](../../ide/viewing-the-structure-of-code.md)。  
  
> [!NOTE]
> 调用层次结构不会查找方法组引用，这些引用包含将方法添加为事件处理程序或将方法分配给委托的位置。 若要查找对方法的所有引用，可以使用“查找所有引用”命令。  
  
## <a name="shortcut-menu-items"></a>快捷菜单项  
 下表描述了在树状视图窗格中右键单击某个节点时，可以使用的多个快捷菜单选项。  
  
|上下文菜单项|描述|  
|-----------------------|-----------------|  
|**作为新根添加**|将选定节点添加为树状视图窗格中的新根节点。 这样就可以集中关注特定子树。|  
|**移除根**|从树视图窗格中删除所选根节点。 只有根节点有此选项。<br /><br /> 还可以使用“移除根”工具栏按钮来移除选定的根节点。|  
|**转到定义**|在选定节点上运行“转到定义”命令。 这会导航到成员调用的原始定义或变量定义。<br /><br /> 若要运行“转到定义”命令，还可以双击选定节点或在选定节点上按 F12。|  
|**查找所有引用**|在选定节点上运行“查找所有引用”命令。 这会在项目中查找所有引用某个类或成员的代码行。<br /><br /> 还可以使用 Shift+F12 在选定节点上运行“查找所有引用”命令。|  
|**复制**|复制选定节点（但不包含其子节点）的内容。|  
|**刷新**|折叠选定节点，重新展开它后便可显示最新的信息。|
